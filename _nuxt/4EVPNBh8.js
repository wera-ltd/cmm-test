import{_ as R}from"./CbahZn9K.js";import{u as W,a as J,_ as K}from"./BvK_Wn8L.js";import{_ as X}from"./CYGjhD3n.js";import{_ as Y}from"./DzNLUmB6.js";import{T as Z}from"./EHl73B7K.js";import ee from"./DPuBlLl5.js";import te from"./BmKEKInQ.js";import oe from"./B32q_OBx.js";import se from"./D4Q2FNhQ.js";import re from"./DoprScrc.js";import ne from"./-0WNV_Yu.js";import{m as le,n as ae,r as P,p as L,x as ie,g as ce,v as de,c as _,o as i,b as f,a as e,w as v,s as ue,k as t,F as B,L as E,z as C,A as I,l as me,t as p,M as H,y as pe,d as S,C as _e}from"./VTDzWjFv.js";import{u as fe}from"./BvKirwZg.js";import"./BViTeqJX.js";import"./BSfCurqH.js";import"./C83wAQ9-.js";import"./BrfYXQZl.js";import"./BeoIJ4Rp.js";import"./CHVtxij9.js";import"./B_ZkaCnP.js";import"./CPTL361f.js";import"./BARK7GwQ.js";import"./U3MP3nBp.js";import"./BItYtUdY.js";import"./Dd6MSeE6.js";import"./N03T6rYg.js";import"./CquDa5o3.js";import"./BeRD1YS2.js";import"./cb-6NHMh.js";import"./CSsR9l9O.js";import"./BHX15g7l.js";import"./BLHvE9vM.js";import"./STgHfwyX.js";const he=le(()=>{const{data:y,...V}=ae({key:()=>["workHistory","errorList"],query:()=>fe().workHistory.historyErrorListGet().then(o=>o.data)}),c=P({keyword:"",channel_list:[],errorCategory:"All"}),$=L(()=>{var s;const o=[{name:"All",code:"All"},{name:"옵션변경",code:"error-001"},{name:"판매중지",code:"error-002"},{name:"상품조회",code:"error-003"},{name:"채널정책",code:"error-999"}],u=((s=y.value)==null?void 0:s.error_group_code_data)||[];return o.map(r=>{var x;if(r.code==="All")return{...r,count:((x=y.value)==null?void 0:x.error_tot_count)||0};const m=u.find(g=>g.code===r.code);return{...r,count:(m==null?void 0:m.count)||0}})}),h=L(()=>{var u;let o=((u=y.value)==null?void 0:u.error_data_list)||[];if(c.value.errorCategory!=="All"&&(o=o.filter(s=>s.error_type_code===c.value.errorCategory)),c.value.keyword&&c.value.keyword.trim()){const s=c.value.keyword.trim();o=o.filter(r=>{const m=(r.channel_product_name||"").toLowerCase(),x=(r.channel_product_id||"").toLowerCase(),g=(r.error_type_name||"").toLowerCase();return m.includes(s)||x.includes(s)||g.includes(s)})}if(c.value.channel_list&&c.value.channel_list.length>0){const s=c.value.channel_list.map(r=>{const[m]=r.key.split("::");return m});o=o.filter(r=>s.includes(r.channel_id))}return o}),d=P([]),w=L({get:()=>h.value.length?d.value.length===h.value.length:!1,set:o=>{o?d.value=[...h.value]:d.value=[]}}),b=o=>d.value.some(u=>u.mid===o.mid),A=o=>{const u=d.value.findIndex(s=>s.mid===o.mid);u>-1?d.value.splice(u,1):d.value.push(o)};return ie(h,()=>{d.value=[]}),{data:y,errorCategories:$,filteredErrorData:h,filter:c,isAllSelected:w,isItemSelected:b,selectedItems:d,toggleItemSelection:A,...V}}),xe={class:"portrait:h-dvh"},ve={class:"flex items-center gap-1"},ye={ref:"$elExceptDiv",class:"px-4 js-exception-content"},ge={class:"flex items-center mb-1 bg-white rounded-2xl"},we=["onClick"],be={class:"text-sm font-normal"},ke={key:1,class:"text-sm font-normal"},Ce={class:"flex items-center"},Ie={class:"flex items-center gap-2 text-sm"},Ve={key:0,class:"font-medium"},$e={class:"js-list"},Ae={class:"flex w-full items-center mb-1"},Le={class:"w-4"},Se=["checked","onChange"],De={class:"w-14 text-center flex-none"},Pe=["src"],Be={class:"gap-1 w-[calc(100%-7rem)] ml-1"},Ee={class:"flex items-center justify-between mb-1"},He={class:"font-medium leading-4"},Ne={class:"flex items-center"},Te={class:"text-gray-400 text-xxs overflow-ellipsis whitespace-nowrap overflow-hidden"},Ue={type:"button",class:"text-xs w-8 h-8 right-0 top-0 text-[#3f7ddc]"},je={class:"flex items-center pl-4"},ze={class:"w-14 text-center flex-none text-xs text-gray-400"},Fe={class:"w-[calc(100%-4rem)] text-xs ml-1 flex items-center justify-between pr-3"},Qe={class:"text-red-400"},Ct=ce({__name:"error-list",setup(y){const{contentHeight:V,updateAllHeights:c}=W(".js-exception-content");de(()=>{c()});const{getChannelIcon:$,channelOptionsWithAccount:h}=J(),{data:d,error:w,isLoading:b,refetch:A,errorCategories:o,filteredErrorData:u,filter:s,isAllSelected:r,isItemSelected:m,selectedItems:x,toggleItemSelection:g}=he();return(qe,n)=>{const D=ue,N=R,T=K,U=ne,j=re,z=se,F=oe,Q=X,q=Y,M=te,O=ee,G=Z;return i(),_("article",xe,[f(N,null,{right:v(()=>[e("div",ve,[f(D,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-white! border-white!",rounded:"",outlined:""},{default:v(()=>n[3]||(n[3]=[e("span",{class:"text-sm"},"오류 재전송",-1)])),_:1,__:[3]}),f(D,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-blue-100! border-blue-100!",rounded:""},{default:v(()=>n[4]||(n[4]=[e("span",{class:"text-sm"},"상품 동기화",-1)])),_:1,__:[4]})])]),_:1}),e("div",ye,[f(T,{modelValue:t(s).channel_list,"onUpdate:modelValue":n[0]||(n[0]=l=>t(s).channel_list=l),options:t(h),placeholder:"판매채널 선택",class:"mb-1!","button-class":"rounded-full!"},null,8,["modelValue","options"]),f(z,{class:"mb-4 w-full"},{default:v(()=>[f(U,{modelValue:t(s).keyword,"onUpdate:modelValue":n[1]||(n[1]=l=>t(s).keyword=l),type:"text",class:"text-sm! w-full rounded-full! peer",placeholder:"상품명, 품목코드, 오류구분을 입력하세요"},null,8,["modelValue"]),f(j,{class:"pi pi-search peer-focus:text-primary!"})]),_:1}),e("div",ge,[(i(!0),_(B,null,E(t(o),(l,a)=>(i(),_("button",{key:a,class:H(["py-2 w-full text-center text-gray-600",{"rounded-l-2xl w-56!":a===0,"rounded-r-2xl":a===t(o).length-1,"bg-gray-950 text-white":t(s).errorCategory===l.code}]),onClick:k=>t(s).errorCategory=l.code},[l.count?(i(),C(F,{key:0,value:l.count,size:"small",pt:{pcBadge:{root:"font-normal! bg-red-400! outline-1! rounded-full! -top-[5px]! right-[5px]!"}}},{default:v(()=>[e("strong",be,p(l.name),1)]),_:2},1032,["value"])):(i(),_("strong",ke,p(l.name),1))],10,we))),128))])],512),e("div",{class:"px-4 pt-2 overflow-auto scrollbar-none transition-all duration-300",style:_e({height:t(V)})},[t(b)?(i(),C(Q,{key:0,class:"h-full"})):I("",!0),t(w)?(i(),C(q,{key:1,retry:t(A)},null,8,["retry"])):I("",!0),e("div",Ce,[e("div",Ie,[f(M,{modelValue:t(r),"onUpdate:modelValue":n[2]||(n[2]=l=>me(r)?r.value=l:null),size:"small","input-id":"all",name:"all",binary:!0},null,8,["modelValue"]),n[5]||(n[5]=e("label",{for:"all"},"전체선택",-1)),t(x).length>0?(i(),_("p",Ve,p(t(x).length)+"개 선택 ",1)):I("",!0)])]),!t(b)&&!t(w)&&t(d)?(i(),C(O,{key:2,value:t(u),class:"w-full h-full",pt:{content:"bg-inherit! h-full"}},{list:v(l=>[e("div",$e,[(i(!0),_(B,null,E(l.items,(a,k)=>(i(),_("div",{key:k},[e("div",{class:H(["w-full py-2 text-sm border-gray-300 dark:border-gray-700",{"border-t":k!==0,"border-b":k===l.items.length-1}])},[e("div",Ae,[e("div",Le,[e("input",{type:"checkbox",checked:t(m)(a),onChange:Me=>t(g)(a)},null,40,Se)]),e("div",De,[e("img",{src:t($)(a.channel_id),alt:"",class:"w-10 h-10 mx-auto"},null,8,Pe)]),e("div",Be,[e("div",Ee,[e("p",He,p(a.channel_product_name),1)]),e("div",Ne,[e("div",Te,[S(p(a.channel_name)+" ",1),n[6]||(n[6]=e("span",{class:"bg-gray-300 mx-1 w-px h-2 inline-block"},null,-1)),S(" "+p(a.channel_product_id),1)])])]),pe((i(),_("button",Ue,n[7]||(n[7]=[e("i",{class:"pi pi-chevron-down text-gray-400! text-sm!"},null,-1)]))),[[G,{value:a.msg,pt:{text:"text-sm!"}},void 0,{focus:!0,bottom:!0}]])]),e("div",je,[e("div",ze,p(a.worker_name),1),e("div",Fe,[e("span",Qe,p(a.error_type_name),1),S(" "+p(a.created_at),1)])])],2)]))),128))])]),_:1},8,["value"])):I("",!0)],4)])}}});export{Ct as default};
