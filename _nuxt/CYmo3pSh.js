import{_ as q}from"./DnFJA955.js";import{u as M,a as O,_ as G}from"./C7KLhvor.js";import{_ as W}from"./CwSRvo5M.js";import{_ as J}from"./Q4yayfTn.js";import{T as K}from"./C9lDa1T2.js";import R from"./DjntR-07.js";import X from"./BeZNKGBQ.js";import Y from"./D93sj7my.js";import Z from"./D3WbVNiR.js";import ee from"./rRbc47Jj.js";import te from"./uBygY-j9.js";import{m as oe,n as re,g as se,r as ne,p as V,v as le,c as p,o as i,b as u,a as e,w as f,s as ae,k as o,F as A,L as P,z as v,A as w,M as B,y as ie,t as m,d as b,C as ce}from"./5XEo5QxJ.js";import{u as de}from"./CtisSnCg.js";import"./A_sFbrEh.js";import"./L8L380qB.js";import"./fAwukO7U.js";import"./B201Xp3m.js";import"./Byh_Q4Xd.js";import"./Dw-Vzfz4.js";import"./DQMtkx9W.js";import"./DRErWVAt.js";import"./Diz8u700.js";import"./DFH4HW2W.js";import"./BiiO8ZGn.js";import"./DnOr8G8_.js";import"./B3o3YBtS.js";import"./BL7loy1U.js";import"./Bgp1OksN.js";import"./Cg4oCFSL.js";import"./DluDMLNv.js";import"./1Jt_8vHw.js";import"./BEtR0UhZ.js";import"./hS9LMlMw.js";const ue=oe(()=>({...re({key:()=>["workHistory","errorList"],query:()=>de().workHistory.historyErrorListGet().then(g=>g.data)})})),me={class:"portrait:h-dvh"},pe={class:"flex items-center gap-1"},_e={ref:"$elExceptDiv",class:"px-4 js-exception-content"},fe={class:"flex items-center mb-1 bg-white rounded-2xl"},he=["onClick"],xe={class:"text-sm font-normal"},ye={key:1,class:"text-sm font-normal"},ve={class:"flex items-center"},we={class:"flex items-center gap-2 text-sm"},ge={class:"js-list"},be={class:"flex w-full items-center mb-1"},ke={class:"w-4"},Ce={class:"w-14 text-center flex-none"},Le=["src"],$e={class:"gap-1 w-[calc(100%-7rem)] ml-2"},Ve={class:"flex items-center justify-between mb-1"},Ae={class:"font-medium leading-4"},Pe={class:"flex items-center"},Be={class:"text-gray-400 text-xxs overflow-ellipsis whitespace-nowrap overflow-hidden"},De={type:"button",class:"text-xs w-8 h-8 right-0 top-0 text-[#3f7ddc]"},Ie={class:"flex items-center pl-4"},ze={class:"w-14 text-center flex-none text-xs text-gray-400"},Ee={class:"w-[calc(100%-4rem)] text-xs ml-2 flex items-center justify-between pr-3"},He={class:"text-red-400"},ft=se({__name:"error-list",setup(D){const{contentHeight:g,updateAllHeights:I}=M(".js-exception-content"),{data:x,error:k,isLoading:C,refetch:z}=ue(),{getChannelIcon:E,channelOptionsWithAccount:H}=O(),r=ne({keyword:"",channel_list:[],errorCategory:"All"}),L=V(()=>{var n;const c=[{name:"All",code:"All"},{name:"옵션변경",code:"error-001"},{name:"판매중지",code:"error-002"},{name:"상품조회",code:"error-003"},{name:"채널정책",code:"error-999"}],t=((n=x.value)==null?void 0:n.error_group_code_data)||[];return c.map(s=>{var _;if(s.code==="All")return{...s,count:((_=x.value)==null?void 0:_.error_tot_count)||0};const d=t.find(h=>h.code===s.code);return{...s,count:(d==null?void 0:d.count)||0}})}),N=V(()=>{var t;let c=((t=x.value)==null?void 0:t.error_data_list)||[];if(r.value.errorCategory!=="All"&&(c=c.filter(n=>n.error_type_code===r.value.errorCategory)),r.value.keyword&&r.value.keyword.trim()){const n=r.value.keyword.trim().toLowerCase();c=c.filter(s=>{const d=(s.channel_product_name||"").toLowerCase(),_=(s.channel_product_id||"").toLowerCase(),h=(s.error_type_name||"").toLowerCase();return d.includes(n)||_.includes(n)||h.includes(n)})}if(r.value.channel_list&&r.value.channel_list.length>0){const n=r.value.channel_list.map(s=>{const[d]=s.key.split("::");return d});c=c.filter(s=>n.includes(s.channel_id))}return c});return le(()=>{I()}),(c,t)=>{const n=ae,s=q,d=G,_=te,h=ee,T=Z,j=Y,U=W,F=J,$=X,Q=R,S=K;return i(),p("article",me,[u(s,null,{right:f(()=>[e("div",pe,[u(n,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-white! border-white!",rounded:"",outlined:""},{default:f(()=>t[2]||(t[2]=[e("span",{class:"text-sm"},"오류 재전송",-1)])),_:1,__:[2]}),u(n,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-blue-100! border-blue-100!",rounded:""},{default:f(()=>t[3]||(t[3]=[e("span",{class:"text-sm"},"상품 동기화",-1)])),_:1,__:[3]})])]),_:1}),e("div",_e,[u(d,{modelValue:o(r).channel_list,"onUpdate:modelValue":t[0]||(t[0]=l=>o(r).channel_list=l),options:o(H),placeholder:"판매채널 선택",class:"mb-1!","button-class":"rounded-full!"},null,8,["modelValue","options"]),u(T,{class:"mb-4 w-full"},{default:f(()=>[u(_,{modelValue:o(r).keyword,"onUpdate:modelValue":t[1]||(t[1]=l=>o(r).keyword=l),type:"text",class:"text-sm! w-full rounded-full! peer",placeholder:"상품명, 품목코드, 오류구분을 입력하세요"},null,8,["modelValue"]),u(h,{class:"pi pi-search peer-focus:text-primary!"})]),_:1}),e("div",fe,[(i(!0),p(A,null,P(o(L),(l,a)=>(i(),p("button",{key:a,class:B(["py-2 w-full text-center text-gray-600",{"rounded-l-2xl w-56!":a===0,"rounded-r-2xl":a===o(L).length-1,"bg-gray-950 text-white":o(r).errorCategory===l.code}]),onClick:y=>o(r).errorCategory=l.code},[l.count?(i(),v(j,{key:0,value:l.count,size:"small",pt:{pcBadge:{root:"font-normal! bg-red-400! outline-1! rounded-full! -top-[5px]! right-[5px]!"}}},{default:f(()=>[e("strong",xe,m(l.name),1)]),_:2},1032,["value"])):(i(),p("strong",ye,m(l.name),1))],10,he))),128))])],512),e("div",{class:"px-4 pt-2 overflow-auto scrollbar-none transition-all duration-300",style:ce({height:o(g)})},[o(C)?(i(),v(U,{key:0,class:"h-full"})):w("",!0),o(k)?(i(),v(F,{key:1,retry:o(z)},null,8,["retry"])):w("",!0),e("div",ve,[e("div",we,[u($,{size:"small","input-id":"all",name:"all",value:"All"}),t[4]||(t[4]=e("label",{for:"all"},"전체선택",-1)),w("",!0)])]),!o(C)&&!o(k)&&o(x)?(i(),v(Q,{key:2,value:o(N),class:"w-full h-full",pt:{content:"bg-inherit! h-full"}},{list:f(l=>[e("div",ge,[(i(!0),p(A,null,P(l.items,(a,y)=>(i(),p("div",{key:y,class:B(["w-full py-2 text-sm border-gray-300 dark:border-gray-700",{"border-t":y!==0,"border-b":y===l.items.length-1}])},[e("div",be,[e("div",ke,[u($,{size:"small"})]),e("div",Ce,[e("img",{src:o(E)(a.channel_id),alt:"",class:"w-10 h-10 mx-auto"},null,8,Le)]),e("div",$e,[e("div",Ve,[e("p",Ae,m(a.channel_product_name),1)]),e("div",Pe,[e("div",Be,[b(m(a.channel_name)+" ",1),t[5]||(t[5]=e("span",{class:"bg-gray-300 mx-1 w-px h-2 inline-block"},null,-1)),b(" "+m(a.channel_product_id),1)])])]),ie((i(),p("button",De,t[6]||(t[6]=[e("i",{class:"pi pi-chevron-down text-gray-400! text-sm!"},null,-1)]))),[[S,{value:a.msg,pt:{text:"text-sm!"}},void 0,{focus:!0,bottom:!0}]])]),e("div",Ie,[e("div",ze,m(a.worker_name),1),e("div",Ee,[e("span",He,m(a.error_type_name),1),b(" "+m(a.created_at),1)])])],2))),128))])]),_:1},8,["value"])):w("",!0)],4)])}}});export{ft as default};
