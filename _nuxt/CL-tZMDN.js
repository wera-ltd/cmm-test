import D from"./CNXTg4yz.js";import{g as $,r as c,H as x,p as O,c as w,o as b,b as k,q as S,s as E,w as f,d as g,a as h,t as _,j as a,A,k as F,x as q,m as z}from"./C_gxCnNy.js";const G={class:"relative"},H={class:"absolute top-0 w-full"},P=["src"],J=$({__name:"TreeMultiSelect",props:{options:{},modelValue:{},placeholder:{default:"판매채널 선택"}},emits:["update:modelValue"],setup(C,{emit:K}){const d=C,M=K,T=[{label:"전체",key:"all",children:d.options}],r=c({all:!0}),i=c({}),u=c(!1),p=c(null),V=e=>{u.value=!1,p.value=e},j=e=>{if(e.value!==""){for(let t of d.options)m(t);r.value={...r.value}}else r.value={all:!0}},m=e=>{if(e.children&&e.children.length){r.value[e.key]=!0;for(let t of e.children)m(t)}},y=x(()=>{const e=Object.entries(i.value).filter(([l,o])=>o.checked===!0).map(([l])=>l),t=[];return d.options.forEach(l=>{l.children&&l.children.length>0?t.push(...l.children):t.push(l)}),t.filter(l=>e.includes(l.key))}),N=x(()=>{const e=new Map,t=new Map;return y.value.forEach(o=>{const s=d.options.find(n=>{var v;return(v=n.children)==null?void 0:v.some(B=>B.key===o.key)});if(s){const n=e.get(s.label)||0;e.set(s.label,n+1),t.set(s.label,2)}else{const n=e.get(o.label)||0;e.set(o.label,n+1),t.set(o.label,1)}}),Array.from(e.entries()).map(([o,s])=>t.get(o)===1?o:`${o}(${s}개)`).join(", ")});return O(y,e=>{M("update:modelValue",e)}),(e,t)=>{const l=E,o=D;return b(),w("div",G,[k(l,{outlined:"",class:"w-full justify-between! bg-white! border-[#d1d5db]! text-gray-500! rounded-md! text-sm!",onClick:t[0]||(t[0]=s=>u.value=!0)},{default:f(()=>[g(_(a(p)?a(p):e.placeholder)+" ",1),t[3]||(t[3]=h("i",{class:"pi pi-chevron-down ml-2 flex-none text-sm!"},null,-1))]),_:1,__:[3]}),S(h("div",H,[k(o,{filter:!0,filterMode:"lenient",selectionKeys:a(i),"onUpdate:selectionKeys":t[1]||(t[1]=s=>F(i)?i.value=s:null),value:T,expandedKeys:a(r),selectionMode:"checkbox",class:"w-full md:w-[30rem] relative z-10 px-0! py-0! shadow-md",onFilter:j,pt:{wrapper:"pb-2 text-sm!",pcNodeCheckbox:{root:"w-4! h-4! mr-1",box:"h-full!"},nodeToggleButton:"w-4! h-4!"}},{nodeicon:f(s=>[s.node.icon?(b(),w("img",{key:0,src:s.node.icon,alt:"",class:"w-5 h-5"},null,8,P)):q("",!0)]),default:f(s=>[g(_(s.node.label),1)]),_:1},8,["selectionKeys","expandedKeys"]),h("div",{class:"fixed inset-0",onClick:t[2]||(t[2]=s=>V(a(N)))})],512),[[A,a(u)]])])}}});function Q(){return z}export{J as _,Q as u};
