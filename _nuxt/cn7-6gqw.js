import{bK as ie,L as oe,M as Oe,m as je,O as ye,I as re,bh as X,bz as Z,bL as Se,af as $e,bM as ue,r as he,B as Pe,a0 as me,$ as ke,al as Ee,bN as Ae,c as Fe,o as Ie,x as _e,P as se}from"./B5iB7B5U.js";function K(e){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},K(e)}function le(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),n.push.apply(n,i)}return n}function x(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?le(Object(n),!0).forEach(function(i){be(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function be(e,r,n){return(r=Re(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Re(e){var r=Te(e,"string");return K(r)=="symbol"?r:r+""}function Te(e,r){if(K(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,r);if(K(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function B(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */B=function(){return r};var e,r={},n=Object.prototype,i=n.hasOwnProperty,d=typeof Symbol=="function"?Symbol:{},h=d.iterator||"@@iterator",O=d.asyncIterator||"@@asyncIterator",S=d.toStringTag||"@@toStringTag";function f(a,t,o,s){return Object.defineProperty(a,t,{value:o,enumerable:!s,configurable:!s,writable:!s})}try{f({},"")}catch{f=function(o,s,c){return o[s]=c}}function E(a,t,o,s){var c=t&&t.prototype instanceof V?t:V,v=Object.create(c.prototype);return f(v,"_invoke",function(j,F,y){var w=1;return function(I,_){if(w===3)throw Error("Generator is already running");if(w===4){if(I==="throw")throw _;return{value:e,done:!0}}for(y.method=I,y.arg=_;;){var L=y.delegate;if(L){var D=l(L,y);if(D){if(D===A)continue;return D}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(w===1)throw w=4,y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);w=3;var G=P(j,F,y);if(G.type==="normal"){if(w=y.done?4:2,G.arg===A)continue;return{value:G.arg,done:y.done}}G.type==="throw"&&(w=4,y.method="throw",y.arg=G.arg)}}}(a,o,new g(s||[])),!0),v}function P(a,t,o){try{return{type:"normal",arg:a.call(t,o)}}catch(s){return{type:"throw",arg:s}}}r.wrap=E;var A={};function V(){}function T(){}function R(){}var N={};f(N,h,function(){return this});var H=Object.getPrototypeOf,C=H&&H(H($([])));C&&C!==n&&i.call(C,h)&&(N=C);var M=R.prototype=V.prototype=Object.create(N);function k(a){["next","throw","return"].forEach(function(t){f(a,t,function(o){return this._invoke(t,o)})})}function u(a,t){function o(c,v,j,F){var y=P(a[c],a,v);if(y.type!=="throw"){var w=y.arg,I=w.value;return I&&K(I)=="object"&&i.call(I,"__await")?t.resolve(I.__await).then(function(_){o("next",_,j,F)},function(_){o("throw",_,j,F)}):t.resolve(I).then(function(_){w.value=_,j(w)},function(_){return o("throw",_,j,F)})}F(y.arg)}var s;f(this,"_invoke",function(c,v){function j(){return new t(function(F,y){o(c,v,F,y)})}return s=s?s.then(j,j):j()},!0)}function l(a,t){var o=t.method,s=a.i[o];if(s===e)return t.delegate=null,o==="throw"&&a.i.return&&(t.method="return",t.arg=e,l(a,t),t.method==="throw")||o!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),A;var c=P(s,a.i,t.arg);if(c.type==="throw")return t.method="throw",t.arg=c.arg,t.delegate=null,A;var v=c.arg;return v?v.done?(t[a.r]=v.value,t.next=a.n,t.method!=="return"&&(t.method="next",t.arg=e),t.delegate=null,A):v:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function m(a){this.tryEntries.push(a)}function b(a){var t=a[4]||{};t.type="normal",t.arg=e,a[4]=t}function g(a){this.tryEntries=[[-1]],a.forEach(m,this),this.reset(!0)}function $(a){if(a!=null){var t=a[h];if(t)return t.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length)){var o=-1,s=function c(){for(;++o<a.length;)if(i.call(a,o))return c.value=a[o],c.done=!1,c;return c.value=e,c.done=!0,c};return s.next=s}}throw new TypeError(K(a)+" is not iterable")}return T.prototype=R,f(M,"constructor",R),f(R,"constructor",T),T.displayName=f(R,S,"GeneratorFunction"),r.isGeneratorFunction=function(a){var t=typeof a=="function"&&a.constructor;return!!t&&(t===T||(t.displayName||t.name)==="GeneratorFunction")},r.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,R):(a.__proto__=R,f(a,S,"GeneratorFunction")),a.prototype=Object.create(M),a},r.awrap=function(a){return{__await:a}},k(u.prototype),f(u.prototype,O,function(){return this}),r.AsyncIterator=u,r.async=function(a,t,o,s,c){c===void 0&&(c=Promise);var v=new u(E(a,t,o,s),c);return r.isGeneratorFunction(t)?v:v.next().then(function(j){return j.done?j.value:v.next()})},k(M),f(M,S,"Generator"),f(M,h,function(){return this}),f(M,"toString",function(){return"[object Generator]"}),r.keys=function(a){var t=Object(a),o=[];for(var s in t)o.unshift(s);return function c(){for(;o.length;)if((s=o.pop())in t)return c.value=s,c.done=!1,c;return c.done=!0,c}},r.values=$,g.prototype={constructor:g,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(b),!t)for(var o in this)o.charAt(0)==="t"&&i.call(this,o)&&!isNaN(+o.slice(1))&&(this[o]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var o=this;function s(I){j.type="throw",j.arg=t,o.next=I}for(var c=o.tryEntries.length-1;c>=0;--c){var v=this.tryEntries[c],j=v[4],F=this.prev,y=v[1],w=v[2];if(v[0]===-1)return s("end"),!1;if(!y&&!w)throw Error("try statement without catch or finally");if(v[0]!=null&&v[0]<=F){if(F<y)return this.method="next",this.arg=e,s(y),!0;if(F<w)return s(w),!1}}},abrupt:function(t,o){for(var s=this.tryEntries.length-1;s>=0;--s){var c=this.tryEntries[s];if(c[0]>-1&&c[0]<=this.prev&&this.prev<c[2]){var v=c;break}}v&&(t==="break"||t==="continue")&&v[0]<=o&&o<=v[2]&&(v=null);var j=v?v[4]:{};return j.type=t,j.arg=o,v?(this.method="next",this.next=v[2],A):this.complete(j)},complete:function(t,o){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&o&&(this.next=o),A},finish:function(t){for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o];if(s[2]===t)return this.complete(s[4],s[3]),b(s),A}},catch:function(t){for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o];if(s[0]===t){var c=s[4];if(c.type==="throw"){var v=c.arg;b(s)}return v}}throw Error("illegal catch attempt")},delegateYield:function(t,o,s){return this.delegate={i:$(t),r:o,n:s},this.method==="next"&&(this.arg=e),A}},r}function ce(e,r,n,i,d,h,O){try{var S=e[h](O),f=S.value}catch(E){return void n(E)}S.done?r(f):Promise.resolve(f).then(i,d)}function Y(e){return function(){var r=this,n=arguments;return new Promise(function(i,d){var h=e.apply(r,n);function O(f){ce(h,i,d,O,S,"next",f)}function S(f){ce(h,i,d,O,S,"throw",f)}O(void 0)})}}function te(e,r){return Ne(e)||Ge(e,r)||Ve(e,r)||Be()}function Be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ve(e,r){if(e){if(typeof e=="string")return fe(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,r):void 0}}function fe(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=Array(r);n<r;n++)i[n]=e[n];return i}function Ge(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,d,h,O,S=[],f=!0,E=!1;try{if(h=(n=n.call(e)).next,r!==0)for(;!(f=(i=h.call(n)).done)&&(S.push(i.value),S.length!==r);f=!0);}catch(P){E=!0,d=P}finally{try{if(!f&&n.return!=null&&(O=n.return(),Object(O)!==O))return}finally{if(E)throw d}}return S}}function Ne(e){if(Array.isArray(e))return e}function Me(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Oe()?je(e):r?e():ye(e)}function De(e,r,n){var i=he(!0),d=Pe(e,function(h,O){i.value&&r(h,O)},n);return{stop:d,pause:function(){i.value=!1},resume:function(){i.value=!0}}}function ee(e){return Object.entries(e).reduce(function(r,n){var i=te(n,2),d=i[0],h=i[1];return d.split(/[\.\[\]]+/).filter(Boolean).reduce(function(O,S,f,E){var P;return(P=O[S])!==null&&P!==void 0?P:O[S]=isNaN(E[f+1])?f===E.length-1?h:{}:[]},r),r},{})}function ve(e,r){if(!e||!r)return null;try{var n=e[r];if(me(n))return n}catch{}var i=r.split(/[\.\[\]]+/).filter(Boolean);return i.reduce(function(d,h){return d&&d[h]!==void 0?d[h]:void 0},e)}var Ke=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=ie({}),i=ie({}),d=oe(function(){return Object.values(n).every(function(k){return!k.invalid})}),h=oe(function(){return ee(n)}),O=function(u,l){return{value:l??ve(r.initialValues,u),touched:!1,dirty:!1,pristine:!0,valid:!0,invalid:!1,error:null,errors:[]}},S=function(u,l){var m=X(l,u);return m===!0||Z(m)&&m.includes(u)},f=function(){var k=Y(B().mark(function u(l,m){var b,g,$;return B().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(g={},!Z(r[l])){t.next=7;break}return t.next=4,T(r[l]);case 4:g=t.sent,t.next=12;break;case 7:if(t.t0=(b=r[l])!==null&&b!==void 0?b:m,!t.t0){t.next=12;break}return t.next=11,T();case 11:g=t.sent;case 12:if($=Object.keys(i).filter(function(o){var s;return(s=i[o])===null||s===void 0||(s=s.options)===null||s===void 0?void 0:s[l]})||[],t.t1=me($),!t.t1){t.next=18;break}return t.next=17,T($);case 17:g=t.sent;case 18:return t.abrupt("return",g);case 19:case"end":return t.stop()}},u)}));return function(l,m){return k.apply(this,arguments)}}(),E=function(u,l,m,b){var g,$;((g=l==null?void 0:l[m])!==null&&g!==void 0?g:S(u,($=r[m])!==null&&$!==void 0?$:b))&&T(u)},P=function(u,l){var m,b;if(!u)return[];(m=i[u])===null||m===void 0||m._watcher.stop(),n[u]||(n[u]=O(u,l==null?void 0:l.initialValue));var g=re((b=X(l,n[u]))===null||b===void 0?void 0:b.props,X(l==null?void 0:l.props,n[u]),{name:u,onBlur:function(){n[u].touched=!0,E(u,l,"validateOnBlur")},onInput:function(t){n[u].value=t&&Object.hasOwn(t,"value")?t.value:t.target.value},onChange:function(t){n[u].value=t&&Object.hasOwn(t,"value")?t.value:t.target.type==="checkbox"||t.target.type==="radio"?t.target.checked:t.target.value},onInvalid:function(t){var o;n[u].invalid=!0,n[u].errors=t,n[u].error=(o=t==null?void 0:t[0])!==null&&o!==void 0?o:null}}),$=De(function(){return n[u].value},function(a,t){n[u].pristine&&(n[u].pristine=!1),a!==t&&(n[u].dirty=!0),E(u,l,"validateOnValueUpdate",!0)});return i[u]={props:g,states:n[u],options:l,_watcher:$},[n[u],g]},A=function(u){return function(){var l=Y(B().mark(function m(b){var g;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f("validateOnSubmit",!0);case 2:return g=a.sent,a.abrupt("return",u(x({originalEvent:b,valid:ue(d),states:ue(h),reset:R},g)));case 4:case"end":return a.stop()}},m)}));return function(m){return l.apply(this,arguments)}}()},V=function(u){return function(){var l=Y(B().mark(function m(b){return B().wrap(function($){for(;;)switch($.prev=$.next){case 0:return R(),$.abrupt("return",u({originalEvent:b}));case 2:case"end":return $.stop()}},m)}));return function(m){return l.apply(this,arguments)}}()},T=function(){var k=Y(B().mark(function u(l){var m,b,g,$,a,t,o,s,c,v,j,F,y,w,I,_,L,D,G,J,z,W,U;return B().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return a=Object.entries(n).reduce(function(Q,ge){var ne=te(ge,2),ae=ne[0],we=ne[1];return Q.names.push(ae),Q.values[ae]=we.value,Q},{names:[],values:{}}),t=[a.names,ee(a.values)],o=t[0],s=t[1],p.next=4,(b=r.resolver)===null||b===void 0?void 0:b.call(r,{names:o,values:s});case 4:if(p.t1=m=p.sent,p.t0=p.t1!==null,!p.t0){p.next=8;break}p.t0=m!==void 0;case 8:if(!p.t0){p.next=12;break}p.t2=m,p.next=13;break;case 12:p.t2={values:s};case 13:c=p.t2,($=(g=c).errors)!==null&&$!==void 0||(g.errors={}),v=[l].flat(),j=0,F=Object.entries(i);case 17:if(!(j<F.length)){p.next=45;break}if(y=te(F[j],2),w=y[0],I=y[1],!(v.includes(w)||!l||$e(c.errors))){p.next=42;break}if(G=(_=I.options)===null||_===void 0?void 0:_.resolver,!G){p.next=37;break}return z=I.states.value,p.next=25,G({values:z,value:z,name:w});case 25:if(p.t4=J=p.sent,p.t3=p.t4!==null,!p.t3){p.next=29;break}p.t3=J!==void 0;case 29:if(!p.t3){p.next=33;break}p.t5=J,p.next=34;break;case 33:p.t5={values:z};case 34:W=p.t5,Z(W.errors)&&(W.errors=be({},w,W.errors)),c=Se(c,W);case 37:U=(L=ve(c.errors,w))!==null&&L!==void 0?L:[],n[w].invalid=U.length>0,n[w].valid=!n[w].invalid,n[w].errors=U,n[w].error=(D=U==null?void 0:U[0])!==null&&D!==void 0?D:null;case 42:j++,p.next=17;break;case 45:return p.abrupt("return",x(x({},c),{},{errors:ee(c.errors)}));case 46:case"end":return p.stop()}},u)}));return function(l){return k.apply(this,arguments)}}(),R=function(){Object.keys(n).forEach(function(){var u=Y(B().mark(function l(m){var b,g;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g=i[m]._watcher,g.pause(),i[m].states=n[m]=O(m,(b=i[m])===null||b===void 0||(b=b.options)===null||b===void 0?void 0:b.initialValue),a.next=5,ye();case 5:g.resume();case 6:case"end":return a.stop()}},l)}));return function(l){return u.apply(this,arguments)}}())},N=function(u,l){n[u].value=l},H=function(u){var l;return(l=i[u])===null||l===void 0?void 0:l.states},C=function(u){Object.keys(u).forEach(function(l){return N(l,u[l])})},M=function(){f("validateOnMount")};return Me(M),{defineField:P,setFieldValue:N,getFieldState:H,handleSubmit:A,handleReset:V,validate:T,setValues:C,reset:R,valid:d,states:h,fields:i}},Ce={root:"p-form p-component"},Le=ke.extend({name:"form",classes:Ce}),Ue={name:"BaseForm",extends:Ee,style:Le,props:{resolver:{type:Function,default:null},initialValues:{type:Object,default:null},validateOnValueUpdate:{type:[Boolean,Array],default:!0},validateOnBlur:{type:[Boolean,Array],default:!1},validateOnMount:{type:[Boolean,Array],default:!1},validateOnSubmit:{type:[Boolean,Array],default:!0}},provide:function(){return{$pcForm:this,$parentInstance:this}}};function q(e){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},q(e)}function pe(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),n.push.apply(n,i)}return n}function He(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?pe(Object(n),!0).forEach(function(i){We(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function We(e,r,n){return(r=Ye(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Ye(e){var r=qe(e,"string");return q(r)=="symbol"?r:r+""}function qe(e,r){if(q(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,r);if(q(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ze(e,r){return Ze(e)||Xe(e,r)||Qe(e,r)||Je()}function Je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qe(e,r){if(e){if(typeof e=="string")return de(e,r);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,r):void 0}}function de(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,i=Array(r);n<r;n++)i[n]=e[n];return i}function Xe(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,d,h,O,S=[],f=!0,E=!1;try{if(h=(n=n.call(e)).next,r!==0)for(;!(f=(i=h.call(n)).done)&&(S.push(i.value),S.length!==r);f=!0);}catch(P){E=!0,d=P}finally{try{if(!f&&n.return!=null&&(O=n.return(),Object(O)!==O))return}finally{if(E)throw d}}return S}}function Ze(e){if(Array.isArray(e))return e}var xe={name:"Form",extends:Ue,inheritAttrs:!1,emits:["submit","reset"],setup:function(r,n){var i=n.emit,d=he(null),h=Ke(r),O=function(){var A;(A=d.value)===null||A===void 0||A.requestSubmit()},S=function(A,V){if(!(V!=null&&V.novalidate)){var T=h.defineField(A,V),R=ze(T,2),N=R[1];return N}return{}},f=h.handleSubmit(function(P){i("submit",P)}),E=h.handleReset(function(P){i("reset",P)});return He({formRef:d,submit:O,register:S,onSubmit:f,onReset:E},Ae(h,["handleSubmit","handleReset"]))}};function er(e,r,n,i,d,h){return Ie(),Fe("form",re({ref:"formRef",onSubmit:r[0]||(r[0]=se(function(){return i.onSubmit&&i.onSubmit.apply(i,arguments)},["prevent"])),onReset:r[1]||(r[1]=se(function(){return i.onReset&&i.onReset.apply(i,arguments)},["prevent"])),class:e.cx("root")},e.ptmi("root")),[_e(e.$slots,"default",re({register:i.register,valid:e.valid,reset:e.reset},e.states))],16)}xe.render=er;export{xe as default};
