import b from"./D1OBUCG7.js";import{g as w,c as r,o,F as h,A as m,B as v,D as T,K as C,a as k,b as p,z as B,w as x,G as g,R as $,k as N,S as O,m as z,n as V,p as f,v as A,H as G}from"./gXFK7R9O.js";import{u as H}from"./B8_qOJsw.js";const I={key:0},Q={class:"flex"},j={class:"self-center flex-1"},R=w({__name:"Skeleton",props:{type:{type:String,default:"list"},count:{type:Number,default:10},style:{type:String},class:{type:String}},setup(e){const a=e;return(c,u)=>{const l=b;return o(),r(h,null,[e.type==="list"?(o(),r("ul",I,[(o(!0),r(h,null,v(e.count,d=>(o(),r("li",{class:"mb-4",key:d},[k("div",Q,[p(l,{shape:"circle",size:"4rem",class:"mr-2"}),k("div",j,[p(l,{width:"100%",class:"mb-2"}),p(l,{width:"75%"})])])]))),128))])):m("",!0),e.type==="chart"?(o(),r("div",{key:1,class:C(["w-full flex gap-2",a.class]),style:T(a.style)},[(o(!0),r(h,null,v(e.count,d=>(o(),B(l,{width:`${e.count/100*100}%`,height:"100%",key:d},null,8,["width"]))),128))],6)):m("",!0)],64)}}}),D=w({__name:"Modal",props:{hideHeader:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!0},confirmButton:{type:Boolean,default:!0},hideOverlay:{type:Boolean,default:!1},clickToClose:{type:Boolean,default:!1},contentTransition:{type:String,default:"vfm-fade"},overlayTransition:{type:String,default:"vfm-fade"},overlayClass:{type:String,default:""},contentClass:{type:String,default:"bg-white w-full h-full"},lockScroll:{type:Boolean,default:!0},headerClass:{type:String,default:""},focusTrap:{type:Boolean}},emits:["update:modelValue","confirm","closed","opened","clickOutside"],setup(e,{emit:a}){const c=a;return(u,l)=>(o(),B(N(O),$(u.$attrs,{class:"flex justify-center items-center","overlay-class":e.overlayClass,"content-class":["relative modal-contents",e.contentClass],"click-to-close":e.clickToClose,"overlay-transition":e.overlayTransition,"content-transition":e.contentTransition,"hide-overlay":e.hideOverlay,"lock-scroll":e.lockScroll,"focus-trap":e.focusTrap}),{default:x(({params:d,close:S})=>[e.hideHeader?m("",!0):(o(),r("div",{key:0,class:C(`flex items-center justify-between px-4 py-5 ${e.headerClass}`)},[g(u.$slots,"title"),e.closeConfirm?(o(),r("button",{key:0,class:"modal-close-button",onClick:l[0]||(l[0]=()=>c("closed"))},l[1]||(l[1]=[k("i",{class:"pi pi-times"},null,-1)]))):m("",!0)],2)),g(u.$slots,"default",{params:d})]),_:3},16,["overlay-class","content-class","click-to-close","overlay-transition","content-transition","hide-overlay","lock-scroll","focus-trap"]))}}),K=z(()=>{const e=V({key:["customer","channels"],query:()=>H().customer.customerChannelGet().then(n=>n.data.channel_code_data),staleTime:6e5}),a=f(()=>{var t,s;const n=[];return(s=(t=e==null?void 0:e.data)==null?void 0:t.value)==null||s.forEach(i=>{let y=n.find(_=>_.channel_id===i.channel_id);y||(y={channel_id:i.channel_id,channel_name:i.channel_name,use_yn:i.use_yn,nick_name:i.nick_name,icon_url:i.icon_url,accounts:[]},n.push(y)),y.accounts.includes(i.account_id)||y.accounts.push(i.account_id)}),n}),c=f(()=>{var n;return(n=a.value)==null?void 0:n.filter(t=>t.use_yn==="Y")}),u=f(()=>{var n;return(n=c==null?void 0:c.value)==null?void 0:n.map(t=>({label:t.channel_name,key:t.channel_id,icon:t.icon_url||""}))}),l=f(()=>{var n;return(n=c==null?void 0:c.value)==null?void 0:n.map(t=>({label:t.channel_name,key:t.channel_id,icon:t.icon_url||"",children:t.accounts.map(s=>({label:s,key:`${t.channel_id}::${s}`}))}))});return{...e,channels:a,channelOptions:u,channelOptionsWithAccount:l,getChannelIcon:n=>{var t;return((t=a.value.find(s=>s.channel_id===n))==null?void 0:t.icon_url)??""},getChannelById:n=>a.value.find(t=>t.channel_id===n),getChannelsByName:n=>a.value.filter(t=>{var s;return(s=t.channel_name)==null?void 0:s.includes(n)})}}),L=e=>{A(()=>{window.history.pushState(null,"",location.href),window.onpopstate=()=>{e&&e()}}),G(()=>{window.history.replaceState(window.history.state,"",location.href),window.onpopstate=()=>{}})};export{R as _,L as a,D as b,K as u};
