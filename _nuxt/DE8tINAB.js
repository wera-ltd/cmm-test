import{_ as p}from"./BZERu_QB.js";import{g as h,c as d,o as m,A as f,b as y,t as b,m as g,n as k,p as c}from"./peAuiAyh.js";import{u as C}from"./BXP0eRD2.js";const v={class:"mb-4"},B={key:0,class:"block font-medium mb-2 text-md"},S=h({__name:"TreeSelect",props:{title:{},options:{},modelValue:{},placeholder:{},buttonClass:{}},setup(s){return(t,a)=>{const i=p;return m(),d("div",v,[t.title?(m(),d("strong",B,b(t.title),1)):f("",!0),y(i,{"model-value":t.modelValue,options:t.options,placeholder:t.placeholder,"button-class":t.buttonClass,"onUpdate:modelValue":a[0]||(a[0]=r=>t.$emit("update:modelValue",r))},null,8,["model-value","options","placeholder","button-class"])])}}}),T=g(()=>{const s=k({key:["customer","channels"],query:()=>C().customer.customerChannelGet().then(n=>n.data.channel_code_data),staleTime:6e5}),t=c(()=>{var e,o;const n=[];return(o=(e=s==null?void 0:s.data)==null?void 0:e.value)==null||o.forEach(l=>{let u=n.find(_=>_.channel_id===l.channel_id);u||(u={channel_id:l.channel_id,channel_name:l.channel_name,use_yn:l.use_yn,nick_name:l.nick_name,icon_url:l.icon_url,accounts:[]},n.push(u)),u.accounts.includes(l.account_id)||u.accounts.push(l.account_id)}),n}),a=c(()=>{var n;return(n=t.value)==null?void 0:n.filter(e=>e.use_yn==="Y")}),i=c(()=>{var n;return(n=a==null?void 0:a.value)==null?void 0:n.map(e=>({label:e.channel_name,key:e.channel_id,icon:e.icon_url||""}))}),r=c(()=>{var n;return(n=a==null?void 0:a.value)==null?void 0:n.map(e=>({label:e.channel_name,key:e.channel_id,icon:e.icon_url||"",children:e.accounts.map(o=>({label:o,key:`${e.channel_id}::${o}`}))}))});return{...s,channels:t,channelOptions:i,channelOptionsWithAccount:r,getChannelIcon:n=>{var e;return((e=t.value.find(o=>o.channel_id===n))==null?void 0:e.icon_url)??""},getChannelById:n=>t.value.find(e=>e.channel_id===n),getChannelsByName:n=>t.value.filter(e=>{var o;return(o=e.channel_name)==null?void 0:o.includes(n)})}});export{S as _,T as u};
