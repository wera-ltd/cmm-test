import{bM as ve,p as ye,bN as Ae,v as Fe,K as Se,T as oe,bx as te,bC as ne,bO as Te,ac as Ie,bP as de,r as je,x as Re,Z as _e,Y as Be,ak as Ee,bQ as Ve,c as Ge,o as De,D as Me,aR as pe}from"./CzjPxosm.js";function N(r){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(r)}function be(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ae(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?be(Object(t),!0).forEach(function(n){Pe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Pe(r,e,t){return(e=Ne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ne(r){var e=Ce(r,"string");return N(e)=="symbol"?e:e+""}function Ce(r,e){if(N(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(N(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function R(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function f(O,I,V,W){var q=I&&I.prototype instanceof p?I:p,K=Object.create(q.prototype);return F(K,"_invoke",function(w,a,u){var l,o,s,m=0,$=u||[],c=!1,y={p:0,n:0,v:r,a:B,f:B.bind(r,4),d:function(j,k){return l=j,o=0,s=r,y.n=k,v}};function B(h,j){for(o=h,s=j,e=0;!c&&m&&!k&&e<$.length;e++){var k,S=$[e],E=y.p,A=S[2];h>3?(k=A===j)&&(s=S[(o=S[4])?5:(o=3,3)],S[4]=S[5]=r):S[0]<=E&&((k=h<2&&E<S[1])?(o=0,y.v=j,y.n=S[1]):E<A&&(k=h<3||S[0]>j||j>A)&&(S[4]=h,S[5]=j,y.n=A,o=0))}if(k||h>1)return v;throw c=!0,j}return function(h,j,k){if(m>1)throw TypeError("Generator is already running");for(c&&j===1&&B(j,k),o=j,s=k;(e=o<2?r:s)||!c;){l||(o?o<3?(o>1&&(y.n=-1),B(o,s)):y.n=s:y.v=s);try{if(m=2,l){if(o||(h="next"),e=l[h]){if(!(e=e.call(l,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,o<2&&(o=0)}else o===1&&(e=l.return)&&e.call(l),o<2&&(s=TypeError("The iterator does not provide a '"+h+"' method"),o=1);l=r}else if((e=(c=y.n<0)?s:w.call(a,y))!==v)break}catch(S){l=r,o=1,s=S}finally{m=1}}return{value:e,done:c}}}(O,V,W),!0),K}var v={};function p(){}function d(){}function b(){}e=Object.getPrototypeOf;var g=[][n]?e(e([][n]())):(F(e={},n,function(){return this}),e),P=b.prototype=p.prototype=Object.create(g);function T(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,b):(O.__proto__=b,F(O,i,"GeneratorFunction")),O.prototype=Object.create(P),O}return d.prototype=b,F(P,"constructor",b),F(b,"constructor",d),d.displayName="GeneratorFunction",F(b,i,"GeneratorFunction"),F(P),F(P,i,"Generator"),F(P,n,function(){return this}),F(P,"toString",function(){return"[object Generator]"}),(R=function(){return{w:f,m:T}})()}function F(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}F=function(v,p,d,b){if(p)i?i(v,p,{value:d,enumerable:!b,configurable:!b,writable:!b}):v[p]=d;else{var g=function(T,O){F(v,T,function(I){return this._invoke(T,O,I)})};g("next",0),g("throw",1),g("return",2)}},F(r,e,t,n)}function me(r,e,t,n,i,f,v){try{var p=r[f](v),d=p.value}catch(b){return void t(b)}p.done?e(d):Promise.resolve(d).then(n,i)}function M(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var f=r.apply(e,t);function v(d){me(f,n,i,v,p,"next",d)}function p(d){me(f,n,i,v,p,"throw",d)}v(void 0)})}}function ie(r,e){return He(r)||Le(r,e)||Ue(r,e)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(r,e){if(r){if(typeof r=="string")return he(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?he(r,e):void 0}}function he(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Le(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,b=!1;try{if(f=(t=t.call(r)).next,e!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==e);d=!0);}catch(g){b=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(b)throw i}}return p}}function He(r){if(Array.isArray(r))return r}function We(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Ae()?Fe(r):e?r():Se(r)}function qe(r,e,t){var n=je(!0),i=Re(r,function(f,v){n.value&&e(f,v)},t);return{stop:i,pause:function(){n.value=!1},resume:function(){n.value=!0}}}function ue(r){return Object.entries(r).reduce(function(e,t){var n=ie(t,2),i=n[0],f=n[1];return i.split(/[\.\[\]]+/).filter(Boolean).reduce(function(v,p,d,b){var g;return(g=v[p])!==null&&g!==void 0?g:v[p]=isNaN(b[d+1])?d===b.length-1?f:{}:[]},e),e},{})}function ge(r,e){if(!r||!e)return null;try{var t=r[e];if(_e(t))return t}catch{}var n=e.split(/[\.\[\]]+/).filter(Boolean);return n.reduce(function(i,f){return i&&i[f]!==void 0?i[f]:void 0},r)}var Qe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ve({}),n=ve({}),i=ye(function(){return Object.values(t).every(function(w){return!w.invalid})}),f=ye(function(){return ue(t)}),v=function(a,u){return{value:u??ge(e.initialValues,a),touched:!1,dirty:!1,pristine:!0,valid:!0,invalid:!1,error:null,errors:[]}},p=function(a,u){var l=te(u,a);return l===!0||ne(l)&&l.includes(a)},d=function(){var w=M(R().m(function a(u,l){var o,s,m,$,c;return R().w(function(y){for(;;)switch(y.n){case 0:if(s={},!ne(e[u])){y.n=2;break}return y.n=1,O(e[u]);case 1:s=y.v,y.n=4;break;case 2:if($=(o=e[u])!==null&&o!==void 0?o:l,!$){y.n=4;break}return y.n=3,O();case 3:s=y.v;case 4:if(m=Object.keys(n).filter(function(B){var h;return(h=n[B])===null||h===void 0||(h=h.options)===null||h===void 0?void 0:h[u]})||[],c=_e(m),!c){y.n=6;break}return y.n=5,O(m);case 5:s=y.v;case 6:return y.a(2,s)}},a)}));return function(u,l){return w.apply(this,arguments)}}(),b=function(a,u,l,o){var s,m;((s=u==null?void 0:u[l])!==null&&s!==void 0?s:p(a,(m=e[l])!==null&&m!==void 0?m:o))&&O(a)},g=function(a,u){var l,o;if(!a)return[];(l=n[a])===null||l===void 0||l._watcher.stop(),t[a]||(t[a]=v(a,u==null?void 0:u.initialValue));var s=oe((o=te(u,t[a]))===null||o===void 0?void 0:o.props,te(u==null?void 0:u.props,t[a]),{name:a,onBlur:function(){t[a].touched=!0,b(a,u,"validateOnBlur")},onInput:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.value},onChange:function(c){t[a].value=c&&Object.hasOwn(c,"value")?c.value:c.target.type==="checkbox"||c.target.type==="radio"?c.target.checked:c.target.value},onInvalid:function(c){var y;t[a].invalid=!0,t[a].errors=c,t[a].error=(y=c==null?void 0:c[0])!==null&&y!==void 0?y:null}}),m=qe(function(){return t[a].value},function($,c){t[a].pristine&&(t[a].pristine=!1),$!==c&&(t[a].dirty=!0),b(a,u,"validateOnValueUpdate",!0)});return n[a]={props:s,states:t[a],options:u,_watcher:m},[t[a],s]},P=function(a){return function(){var u=M(R().m(function l(o){var s;return R().w(function(m){for(;;)switch(m.n){case 0:return m.n=1,d("validateOnSubmit",!0);case 1:return s=m.v,m.a(2,a(ae({originalEvent:o,valid:de(i),states:de(f),reset:I},s)))}},l)}));return function(l){return u.apply(this,arguments)}}()},T=function(a){return function(){var u=M(R().m(function l(o){return R().w(function(s){for(;;)switch(s.n){case 0:return I(),s.a(2,a({originalEvent:o}))}},l)}));return function(l){return u.apply(this,arguments)}}()},O=function(){var w=M(R().m(function a(u){var l,o,s,m,$,c,y,B,h,j,k,S,E,A,Q,Y,Z,z,J,X,U,D,G,L,le,x,H,se,ee;return R().w(function(_){for(;;)switch(_.n){case 0:return $=Object.entries(t).reduce(function(re,$e){var ce=ie($e,2),fe=ce[0],ke=ce[1];return re.names.push(fe),re.values[fe]=ke.value,re},{names:[],values:{}}),c=[$.names,ue($.values)],y=c[0],B=c[1],_.n=1,(o=e.resolver)===null||o===void 0?void 0:o.call(e,{names:y,values:B});case 1:if(le=l=_.v,L=le!==null,!L){_.n=2;break}L=l!==void 0;case 2:if(!L){_.n=3;break}x=l,_.n=4;break;case 3:x={values:B};case 4:h=x,(m=(s=h).errors)!==null&&m!==void 0||(s.errors={}),j=[u].flat(),k=0,S=Object.entries(n);case 5:if(!(k<S.length)){_.n=12;break}if(E=ie(S[k],2),A=E[0],Q=E[1],!(j.includes(A)||!u||Ie(h.errors))){_.n=11;break}if(J=(Y=Q.options)===null||Y===void 0?void 0:Y.resolver,!J){_.n=10;break}return U=Q.states.value,_.n=6,J({values:U,value:U,name:A});case 6:if(se=X=_.v,H=se!==null,!H){_.n=7;break}H=X!==void 0;case 7:if(!H){_.n=8;break}ee=X,_.n=9;break;case 8:ee={values:U};case 9:D=ee,ne(D.errors)&&(D.errors=Pe({},A,D.errors)),h=Te(h,D);case 10:G=(Z=ge(h.errors,A))!==null&&Z!==void 0?Z:[],t[A].invalid=G.length>0,t[A].valid=!t[A].invalid,t[A].errors=G,t[A].error=(z=G==null?void 0:G[0])!==null&&z!==void 0?z:null;case 11:k++,_.n=5;break;case 12:return _.a(2,ae(ae({},h),{},{errors:ue(h.errors)}))}},a)}));return function(u){return w.apply(this,arguments)}}(),I=function(){Object.keys(t).forEach(function(){var a=M(R().m(function u(l){var o,s;return R().w(function(m){for(;;)switch(m.n){case 0:return s=n[l]._watcher,s.pause(),n[l].states=t[l]=v(l,(o=n[l])===null||o===void 0||(o=o.options)===null||o===void 0?void 0:o.initialValue),m.n=1,Se();case 1:s.resume();case 2:return m.a(2)}},u)}));return function(u){return a.apply(this,arguments)}}())},V=function(a,u){t[a]!==void 0&&(t[a].value=u)},W=function(a){var u;return(u=n[a])===null||u===void 0?void 0:u.states},q=function(a){Object.keys(a).forEach(function(u){return V(u,a[u])})},K=function(){d("validateOnMount")};return We(K),{defineField:g,setFieldValue:V,getFieldState:W,handleSubmit:P,handleReset:T,validate:O,setValues:q,reset:I,valid:i,states:f,fields:n}},Ye={root:"p-form p-component"},Ze=Be.extend({name:"form",classes:Ye}),ze={name:"BaseForm",extends:Ee,style:Ze,props:{resolver:{type:Function,default:null},initialValues:{type:Object,default:null},validateOnValueUpdate:{type:[Boolean,Array],default:!0},validateOnBlur:{type:[Boolean,Array],default:!1},validateOnMount:{type:[Boolean,Array],default:!1},validateOnSubmit:{type:[Boolean,Array],default:!0}},provide:function(){return{$pcForm:this,$parentInstance:this}}};function C(r){"@babel/helpers - typeof";return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(r)}function Oe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Je(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oe(Object(t),!0).forEach(function(n){Xe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Xe(r,e,t){return(e=xe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xe(r){var e=er(r,"string");return C(e)=="symbol"?e:e+""}function er(r,e){if(C(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(C(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rr(r,e){return ur(r)||ar(r,e)||nr(r,e)||tr()}function tr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(r,e){if(r){if(typeof r=="string")return we(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?we(r,e):void 0}}function we(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function ar(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,f,v,p=[],d=!0,b=!1;try{if(f=(t=t.call(r)).next,e!==0)for(;!(d=(n=f.call(t)).done)&&(p.push(n.value),p.length!==e);d=!0);}catch(g){b=!0,i=g}finally{try{if(!d&&t.return!=null&&(v=t.return(),Object(v)!==v))return}finally{if(b)throw i}}return p}}function ur(r){if(Array.isArray(r))return r}var or={name:"Form",extends:ze,inheritAttrs:!1,emits:["submit","reset"],setup:function(e,t){var n=t.emit,i=je(null),f=Qe(e),v=function(){var P;(P=i.value)===null||P===void 0||P.requestSubmit()},p=function(P,T){if(!(T!=null&&T.novalidate)){var O=f.defineField(P,T),I=rr(O,2),V=I[1];return V}return{}},d=f.handleSubmit(function(g){n("submit",g)}),b=f.handleReset(function(g){n("reset",g)});return Je({formRef:i,submit:v,register:p,onSubmit:d,onReset:b},Ve(f,["handleSubmit","handleReset"]))}};function ir(r,e,t,n,i,f){return De(),Ge("form",oe({ref:"formRef",onSubmit:e[0]||(e[0]=pe(function(){return n.onSubmit&&n.onSubmit.apply(n,arguments)},["prevent"])),onReset:e[1]||(e[1]=pe(function(){return n.onReset&&n.onReset.apply(n,arguments)},["prevent"])),class:r.cx("root")},r.ptmi("root")),[Me(r.$slots,"default",oe({register:n.register,valid:r.valid,reset:r.reset},r.states))],16)}or.render=ir;export{or as default};
