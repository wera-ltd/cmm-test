import{_ as Z}from"./CmwWjqpn.js";import G from"./Bn3HvXyG.js";import ee from"./BkdpPX-U.js";import{g as L,j as N,r as M,z as A,o as p,w as f,a as e,c as y,F as P,L as V,k as o,b as u,s as U,d as h,t as v,v as W,p as te,l as se,R as le,S as E,A as F,C as oe,M as T,N as q,P as ne}from"./DW0zoLkc.js";import ae from"./DIHXZaK5.js";import ie from"./Pe24sewK.js";import{_ as K}from"./ByLZmGCN.js";import{u as O}from"./DxylZ4k7.js";import re from"./rA-KB6S9.js";import{u as de}from"./BIgPuG-1.js";import{u as ue}from"./BfSOBv8R.js";import{u as ce}from"./BzVbpf8P.js";import{u as me}from"./JT-TP0ui.js";import"./CDaTrq0Z.js";import"./CZUB5k-d.js";import"./D1QEQMdK.js";import"./C6LDl6yz.js";import"./Cb9GjxSp.js";import"./sC_O_wLM.js";import"./CMmhfGZ0.js";import"./zX1NU53O.js";import"./2AKDl8gS.js";import"./BK6Zk81Q.js";const pe={class:"border-t border-[var(--space-border)] px-4 py-4 flex-1 overflow-y-auto scrollbar-none"},_e={class:"space-y-3"},fe={class:"mt-4"},ye={class:"text-xs text-gray-500 mt-2"},ve={class:"h-14 shrink-0 w-full flex items-center border-t-gray-100 border-t justify-center px-3 py-2 gap-2"},he=L({__name:"TimeBulkSetting",emits:["closed"],setup(I,{emit:z}){const g=z,{scheduleData:x}=O(),{toast:D}=N(),s=M([]),r=d=>{if(!d||d.length!==4)return null;const a=parseInt(d.substring(0,2)),C=parseInt(d.substring(2,4)),i=new Date;return i.setHours(a,C,0,0),i},w=(d,a)=>{s.value[d]=a.replace(":","")},B=()=>{var d;s.value.length<(((d=x.value)==null?void 0:d.round)||0)&&s.value.push("0000")},b=d=>{s.value.splice(d,1)},n=()=>{if(s.value.length===0){D.error("최소 하나의 시간을 설정해야 합니다.");return}x.value.days_list.forEach(d=>{d.time=[...s.value],d.is_day=!0}),g("closed")};return(d,a)=>{const C=G,i=U,l=K;return p(),A(l,{"content-class":"bg-white w-80 h-[50dvh] flex flex-col","header-class":"shrink-0 border-b border-zinc-200",onClosed:a[1]||(a[1]=t=>g("closed"))},{title:f(()=>a[2]||(a[2]=[e("h1",{class:"font-semibold"}," 시간일괄설정 ",-1)])),default:f(()=>{var t,c;return[e("div",pe,[a[4]||(a[4]=e("div",{class:"text-sm text-gray-600 mb-4"}," 설정된 시간이 모든 요일에 적용됩니다. ",-1)),e("div",_e,[(p(!0),y(P,null,V(o(s),(_,k)=>(p(),y("div",{key:k,class:"flex items-center border-b border-gray-200 pb-3"},[u(C,{"model-value":r(_),"step-minute":10,"time-only":"",placeholder:"시/분",class:"w-full",onBlur:$=>w(k,$.value)},null,8,["model-value","onBlur"]),u(i,{icon:"pi pi-times",severity:"secondary",rounded:"",size:"small",variant:"text","aria-label":"Cancel",class:"ml-1",onClick:$=>b(k)},null,8,["onClick"])]))),128))]),e("div",fe,[u(i,{disabled:o(s).length>=(((t=o(x))==null?void 0:t.round)||0),rounded:"",size:"small",outlined:"",severity:"secondary",onClick:B},{default:f(()=>a[3]||(a[3]=[e("i",{class:"pi pi-plus text-sm!"},null,-1),h(" 시간추가 ")])),_:1,__:[3]},8,["disabled"]),e("div",ye," 최대 "+v(((c=o(x))==null?void 0:c.round)||0)+"개까지 추가 가능 ",1)])]),e("div",ve,[u(i,{size:"small",class:"w-full h-full text-sm!",severity:"secondary",onClick:a[0]||(a[0]=_=>g("closed"))},{default:f(()=>a[5]||(a[5]=[h(" 닫기 ")])),_:1,__:[5]}),u(i,{size:"small",class:"w-full h-full text-sm!",onClick:n},{default:f(()=>a[6]||(a[6]=[h(" 설정 ")])),_:1,__:[6]})])]}),_:1})}}}),ge={class:"border-t border-[var(--space-border)] px-4 py-4 flex-1 overflow-y-auto scrollbar-none"},be={class:"flex items-center gap-2 text-sm mb-3"},xe={for:"all"},ke={class:"text-primary font-normal"},we={class:"gap-2 flex flex-col"},Ce=["onClick"],$e={class:"flex items-center gap-2"},Se=["src"],ze={class:"font-medium block"},De={class:"text-xs text-gray-500"},Be={class:"h-14 shrink-0 w-full flex items-center border-t-gray-100 border-t justify-center px-3 py-2 gap-2"},Pe=L({__name:"ChannelListSetting",emits:["closed"],setup(I,{emit:z}){const g=z,{toast:x}=N(),{getChannelIcon:D}=de(),{scheduleData:s}=O(),r=M();W(()=>{s.value&&(r.value=JSON.parse(JSON.stringify(s.value)))});const w=te({get:()=>!r.value.channel_list||r.value.channel_list.length===0?!1:r.value.channel_list.every(b=>b.is_channel),set:b=>{r.value.channel_list.forEach(n=>{n.is_channel=b})}}),B=()=>{if(!r.value.channel_list.filter(b=>b.is_channel).length){x.error("쇼핑몰 설정은 필수입니다.최소 1개이상 추가 설정 바랍니다.");return}s.value=JSON.parse(JSON.stringify(r.value)),g("closed")};return(b,n)=>{const d=re,a=U,C=K;return p(),A(C,{"content-class":"bg-white w-full h-dvh flex flex-col","header-class":"shrink-0 border-b border-zinc-200",onClosed:n[3]||(n[3]=i=>g("closed"))},{title:f(()=>n[4]||(n[4]=[e("h1",{class:"font-semibold"}," 판매채널 설정 ",-1)])),default:f(()=>[e("div",ge,[e("div",be,[u(d,{modelValue:o(w),"onUpdate:modelValue":n[0]||(n[0]=i=>se(w)?w.value=i:null),size:"small","input-id":"all",name:"all",binary:!0},null,8,["modelValue"]),e("label",xe,[n[5]||(n[5]=h("총 ")),e("b",ke,v(o(r).channel_list.length),1),n[6]||(n[6]=h("개 전체선택 "))])]),e("ul",we,[(p(!0),y(P,null,V(o(r).channel_list,(i,l)=>(p(),y("li",{key:i.account_id,class:"border rounded-md border-gray-200 p-4 flex justify-between items-center cursor-pointer",onClick:t=>i.is_channel=!i.is_channel},[e("div",$e,[e("span",null,v(l+1)+".",1),e("img",{src:o(D)(i.channel_id),alt:"",class:"w-10 h-10"},null,8,Se),e("div",null,[e("strong",ze,v(i.channel_name),1),e("p",De,v(i.account_id),1)])]),u(d,{modelValue:i.is_channel,"onUpdate:modelValue":t=>i.is_channel=t,size:"small","input-id":`channel-${i.account_id}`,binary:!0,onClick:n[1]||(n[1]=le(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","input-id"])],8,Ce))),128))])]),e("div",Be,[u(a,{size:"small",class:"w-full h-full text-sm!",severity:"secondary",onClick:n[2]||(n[2]=i=>g("closed"))},{default:f(()=>n[7]||(n[7]=[h(" 닫기 ")])),_:1,__:[7]}),u(a,{size:"small",class:"w-full h-full text-sm!",onClick:B},{default:f(()=>n[8]||(n[8]=[h(" 확인 ")])),_:1,__:[8]})])]),_:1})}}}),Te={class:"p-4 border-b-8 border-gray-200"},Ve={class:"gap-0.5 flex flex-col text-sm mb-4 text-gray-500"},je={class:"text-primary font-semibold"},Le={class:"flex flex-col gap-2"},Ne={class:"flex items-center justify-between"},Me={class:"flex items-center justify-between"},Ae={class:"flex flex-col gap-2 relative"},Ue={key:0,class:"absolute w-full h-full bg-white/50 z-10 flex items-center justify-center text-sm font-medium"},Oe={class:"flex items-center justify-between mb-4"},Ie={class:"flex flex-wrap gap-1"},Qe=["onClick"],He={class:"font-medium uppercase text-gray-700"},Je={key:1,class:"font-medium uppercase text-gray-700"},Re={class:"flex items-center justify-center gap-1 text-xs my-1"},Ee={class:"text-sm text-gray-400 font-light"},Fe={class:"block pt-4"},qe={class:"flex items-center justify-between mb-2"},Ge={class:"flex items-center gap-2"},We={class:"font-medium uppercase"},Ke={class:"flex flex-wrap gap-y-2"},Xe={class:"relative mr-2"},Ye={class:"px-4 pb-6"},kt=L({__name:"schedule",setup(I){const z=ue(),{toast:g,confirm:x}=N(),{contentHeight:D}=ce(),{scheduleData:s}=O(),r=M(0),w=async l=>{var c;const t=(c=s.value)==null?void 0:c.days_list[r.value];t&&(!l&&t.time.length>0?x({message:"해당 요일의 모든 시간 슬롯이 삭제됩니다. 계속하시겠습니까?",accept:()=>{t.time=[],t.is_day=!1},reject:()=>{t.is_day=!0}}):(t.is_day=l,n()))},B=l=>{if(!l||l.length!==4)return null;const t=parseInt(l.substring(0,2)),c=parseInt(l.substring(2,4)),_=new Date;return _.setHours(t,c,0,0),_},b=(l,t,c)=>{var _,k;(k=(_=s.value)==null?void 0:_.days_list[l])!=null&&k.time&&(s.value.days_list[l].time[t]=c.replace(":",""))},n=()=>{var t,c,_;const l=(t=s.value)==null?void 0:t.days_list[r.value];l&&l.time.length<(((c=s.value)==null?void 0:c.round)||0)?(l.time.push("0000"),l.time.length===1&&(l.is_day=!0)):g.error(`최대 추가 가능 슬롯은 ${(_=s.value)==null?void 0:_.round}개 까지입니다.`)},d=l=>{var c;const t=(c=s.value)==null?void 0:c.days_list[r.value];t&&t.time.length>0&&(t.time.splice(l,1),t.time.length===0&&(t.is_day=!1))},a=()=>{const{open:l}=q({component:he});l()},C=()=>{const{open:l}=q({component:Pe});l()},i=()=>{const{mutate:l}=ne({mutation:()=>me().customer.customerSettingUpdatePatch({CustomerSettingUpdatePatchRequest:{stock_setup_data:{},schedule_data:{...s.value}}}),onSuccess:()=>{E().invalidateQueries({key:["customer","setting"]}),g.success("저장되었습니다.")}});l()};return W(()=>{E().invalidateQueries({key:["customer","setting"]})}),(l,t)=>{var Q,H,J,R;const c=Z,_=ie,k=ae,$=U,X=ee,Y=G;return p(),y(P,null,[u(c,{class:""}),o(s)?(p(),y("div",{key:0,class:"overflow-auto scrollbar-none bg-white",style:oe(`height: ${o(D)}`)},[e("div",Te,[e("div",Ve,[e("p",null,[t[1]||(t[1]=h(" • 요일별 최대 추가 가능 슬롯은 ")),e("strong",je,v((Q=o(s))==null?void 0:Q.round)+"개",1),t[2]||(t[2]=h("까지 가능합니다. "))]),t[3]||(t[3]=e("p",null," • 스케줄 설정시 쇼핑몰 설정도 같이 선택하여주시기 바랍니다. ",-1))]),e("div",Le,[e("div",Ne,[t[4]||(t[4]=e("b",{class:"font-medium"},"스케줄 사용여부",-1)),u(_,{modelValue:o(s).is_schedule,"onUpdate:modelValue":t[0]||(t[0]=m=>o(s).is_schedule=m)},null,8,["modelValue"])]),e("div",Me,[t[6]||(t[6]=e("b",{class:"font-medium"},"쇼핑몰 설정",-1)),e("button",{class:"inline-flex items-center gap-4 text-gray-400 cursor-pointer",onClick:C},[u(k,{severity:"contrast",value:`${(J=(H=o(s))==null?void 0:H.channel_list)==null?void 0:J.filter(m=>m.is_channel).length}개 채널`,class:"font-normal! text-sm! rounded-full!"},null,8,["value"]),t[5]||(t[5]=e("i",{class:"pi pi-chevron-right"},null,-1))])])])]),e("div",Ae,[o(s).is_schedule?F("",!0):(p(),y("div",Ue," 스케줄을 사용할 수 없습니다. ")),e("article",{class:T([{"opacity-10":!o(s).is_schedule},"p-4 pb-1"])},[e("header",Oe,[t[8]||(t[8]=e("h3",{class:"font-medium text-gray-800"}," Weekly schedule ",-1)),u($,{rounded:"",size:"small",outlined:"",onClick:a},{default:f(()=>t[7]||(t[7]=[h(" 시간일괄설정 ")])),_:1,__:[7]})]),e("div",Ie,[(p(!0),y(P,null,V((R=o(s))==null?void 0:R.days_list,(m,S)=>(p(),y("button",{key:S,class:T(["rounded-lg cursor-pointer border w-[calc(25%-3px)] text-center px-4 py-6 relative border-gray-200 shadow-xs",[{"bg-gray-100":!m.is_day},{"shadow-[0_0_10px]! shadow-blue-400/60!":o(s).days_list[o(r)].day===m.day}]]),onClick:j=>r.value=S},[o(z)().format("ddd").toLowerCase()==m.day?(p(),A(X,{key:0,value:"오늘",size:"small",pt:{pcBadge:{root:"font-normal! bg-red-400! outline-1! -top-[55%]!  right-[5%]!"}}},{default:f(()=>[e("strong",He,v(m.day),1)]),_:2},1024)):(p(),y("strong",Je,v(m.day),1)),e("div",Re,[e("i",{class:T(["w-2 h-2 rounded-full block",m.is_day?"bg-purple-500":"bg-gray-300"])},null,2),e("span",{class:T(["",m.is_day?"text-purple-500":"text-gray-500"])},v(m.is_day?"사용":"미사용"),3)]),e("p",Ee,v(m.time.length<1?"-":m.time.length+" slots"),1)],10,Qe))),128))]),e("div",Fe,[e("div",qe,[e("div",Ge,[e("strong",We,v(o(s).days_list[o(r)].day),1),u(_,{"model-value":o(s).days_list[o(r)].is_day,class:"relative w-10! h-5!",pt:{handle:"w-3! h-3! data-[p=checked]:start-[24px]! top-[60%]!",slider:"data-[p=checked]:bg-violet-500!"},"onUpdate:modelValue":w},null,8,["model-value"])])]),e("div",Ke,[(p(!0),y(P,null,V(o(s).days_list[o(r)].time,(m,S)=>(p(),y("div",{key:m+S},[e("div",Xe,[u(Y,{"model-value":B(m),"step-minute":10,"time-only":"",placeholder:"시/분",class:"w-24",pt:{pcinputtext:{root:"pr-8!"}},onBlur:j=>b(o(r),S,j.value)},null,8,["model-value","onBlur"]),u($,{icon:"pi pi-times",severity:"secondary",rounded:"",size:"small",variant:"text","aria-label":"Cancel",class:"absolute! h-full! right-0",onClick:j=>d(S)},null,8,["onClick"])])]))),128)),u($,{rounded:"",size:"small",outlined:"",severity:"secondary",onClick:n},{default:f(()=>t[9]||(t[9]=[e("i",{class:"pi pi-plus text-sm!"},null,-1),h(" 시간추가 ")])),_:1,__:[9]})])])],2),e("div",Ye,[u($,{type:"button",class:"flex w-full items-center gap-2 text-blue-600! bg-blue-100! border-blue-100!",rounded:"",onClick:i},{default:f(()=>t[10]||(t[10]=[e("span",{class:"text-sm"},"저장",-1)])),_:1,__:[10]})])])],4)):F("",!0)],64)}}});export{kt as default};
