import{_ as K,a as M}from"./BKAGVwVT.js";import{u as G,a as D,b as W,_ as J}from"./kbo7I4FD.js";import{T as R}from"./YvNUvJgr.js";import X from"./BQ-mzALF.js";import Y from"./CjhcBsAY.js";import Z from"./B-9yuPCU.js";import tt from"./vFNPbiD0.js";import et from"./CCdNZ1wi.js";import{m as ot,n as rt,g as st,r as nt,p as b,v as lt,c,o as n,b as d,a as t,w as p,s as at,k as e,O as it,F as H,L as E,z as y,A as k,M as S,y as ct,t as a,d as C,C as dt}from"./yC58Akfr.js";import{u as ut}from"./BVXGDbZy.js";import"./BmSdwSwl.js";import"./Bf9rKCjz.js";import"./DCU8UAqA.js";import"./D4kx8APV.js";import"./C6jXhQsF.js";import"./CYMAFoRT.js";import"./8g7Lf_Gn.js";import"./CHL6dJW2.js";import"./DfViNeur.js";import"./Bf_Ya4UC.js";import"./CmPO-tfx.js";import"./Dcc21lOB.js";import"./7I55X6Re.js";import"./VNltKC8m.js";import"./BaV2AELK.js";import"./CVLfV3h5.js";import"./D5pN1Ky3.js";import"./BEGH_MXk.js";import"./CfsYWKPM.js";import"./Bss8M8fG.js";import"./D2TJILmS.js";const pt=ot(()=>{const V={error_tot_count:void 0,error_group_code_data:[]},g=rt({key:()=>["workHistory","errorList"],query:()=>ut().workHistory.historyErrorListGet().then(v=>v.data)});return{defaultFilter:V,...g}}),mt={class:"portrait:h-dvh"},_t={class:"flex items-center gap-1"},ft={ref:"$elExceptDiv",class:"px-4 js-exception-content"},ht={class:"flex items-center mb-1 bg-white rounded-2xl"},xt=["onClick"],yt={class:"text-sm font-normal"},gt={key:1,class:"text-sm font-normal"},vt={class:"js-list"},wt={class:"flex w-full items-center mb-1"},bt={class:"w-14 text-center flex-none"},kt=["src"],Ct={class:"gap-1 w-[calc(100%-6rem)] ml-2"},Vt={class:"flex items-center justify-between mb-1"},$t={class:"font-medium leading-4"},Lt={class:"flex items-center"},At={class:"text-gray-400 text-xxs overflow-ellipsis whitespace-nowrap overflow-hidden"},Bt={type:"button",class:"text-xs w-8 h-8 right-0 top-0 text-[#3f7ddc]"},Dt={class:"flex items-center"},Ht={class:"w-14 text-center flex-none text-xs text-gray-400"},Et={class:"w-[calc(100%-4rem)] text-xs ml-2 flex items-center justify-between pr-3"},St={class:"text-red-400"},ue=st({__name:"error-list",setup(V){const{contentHeight:g,updateAllHeights:v}=G(".js-exception-content"),{data:f,error:$,isLoading:L,refetch:j}=pt(),{getChannelIcon:F}=D(),{channelOptionsWithAccount:P}=D(),l=nt({keyword:"",channel_list:[],errorCategory:"All"}),A=b(()=>{var i;const m=[{name:"All",code:"All"},{name:"옵션변경",code:"error-001"},{name:"판매중지",code:"error-002"},{name:"상품조회",code:"error-003"},{name:"채널정책",code:"error-999"}],o=((i=f.value)==null?void 0:i.error_group_code_data)||[];return m.map(u=>{var h;if(u.code==="All")return{...u,count:((h=f.value)==null?void 0:h.error_tot_count)||0};const _=o.find(w=>w.code===u.code);return{...u,count:(_==null?void 0:_.count)||0}})}),T=b(()=>{var o;const m=((o=f.value)==null?void 0:o.error_data_list)||[];return l.value.errorCategory==="All"?m:m.filter(i=>i.error_type_code===l.value.errorCategory)}),U=b(()=>g.value),B=()=>{console.log("handleSearch")};return lt(()=>{v()}),(m,o)=>{const i=at,u=K,_=W,h=et,w=tt,z=Z,I=Y,N=J,Q=M,O=X,q=R;return n(),c("article",mt,[d(u,null,{right:p(()=>[t("div",_t,[d(i,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-white! border-white!",rounded:"",outlined:""},{default:p(()=>o[2]||(o[2]=[t("span",{class:"text-sm"},"오류 재전송",-1)])),_:1,__:[2]}),d(i,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-blue-100! border-blue-100!",rounded:""},{default:p(()=>o[3]||(o[3]=[t("span",{class:"text-sm"},"상품 동기화",-1)])),_:1,__:[3]})])]),_:1}),t("div",ft,[d(_,{modelValue:e(l).channel_list,"onUpdate:modelValue":o[0]||(o[0]=r=>e(l).channel_list=r),options:e(P),placeholder:"판매채널 선택",class:"mb-1!","button-class":"rounded-full!"},null,8,["modelValue","options"]),d(z,{class:"mb-4 w-full"},{default:p(()=>[d(h,{modelValue:e(l).keyword,"onUpdate:modelValue":o[1]||(o[1]=r=>e(l).keyword=r),type:"text",class:"text-sm! w-full rounded-full! peer",placeholder:"상품명, 품목코드, 오류구분을 입력하세요",onKeyup:it(B,["enter"])},null,8,["modelValue"]),d(w,{class:"pi pi-search peer-focus:text-primary!",onClick:B})]),_:1}),t("div",ht,[(n(!0),c(H,null,E(e(A),(r,s)=>(n(),c("button",{key:s,class:S(["py-2 w-full text-center text-gray-600",{"rounded-l-2xl w-56!":s===0,"rounded-r-2xl":s===e(A).length-1,"bg-gray-950 text-white":e(l).errorCategory===r.code}]),onClick:x=>e(l).errorCategory=r.code},[r.count?(n(),y(I,{key:0,value:r.count,size:"small",pt:{pcBadge:{root:"font-normal! bg-red-400! outline-1! rounded-full! -top-[5px]! right-[5px]!"}}},{default:p(()=>[t("strong",yt,a(r.name),1)]),_:2},1032,["value"])):(n(),c("strong",gt,a(r.name),1))],10,xt))),128))])],512),t("div",{class:"px-4 pt-2 overflow-auto scrollbar-none transition-all duration-300",style:dt({height:e(U)})},[e(L)?(n(),y(N,{key:0,class:"h-full"})):k("",!0),e($)?(n(),y(Q,{key:1,retry:e(j)},null,8,["retry"])):k("",!0),!e(L)&&!e($)&&e(f)?(n(),y(O,{key:2,value:e(T),class:"w-full h-full",pt:{content:"bg-inherit! h-full"}},{list:p(r=>[t("div",vt,[(n(!0),c(H,null,E(r.items,(s,x)=>(n(),c("div",{key:x,class:S(["w-full py-2 text-sm border-gray-300 dark:border-gray-700",{"border-t":x!==0,"border-b":x===r.items.length-1}])},[t("div",wt,[t("div",bt,[t("img",{src:e(F)(s.channel_id),alt:"",class:"w-10 h-10 mx-auto"},null,8,kt)]),t("div",Ct,[t("div",Vt,[t("p",$t,a(s.channel_product_name),1)]),t("div",Lt,[t("div",At,[C(a(s.channel_name)+" ",1),o[4]||(o[4]=t("span",{class:"bg-gray-300 mx-1 w-px h-2 inline-block"},null,-1)),C(" "+a(s.channel_product_id),1)])])]),ct((n(),c("button",Bt,o[5]||(o[5]=[t("i",{class:"pi pi-chevron-down text-gray-400! text-sm!"},null,-1)]))),[[q,{value:s.msg,pt:{text:"text-sm!"}},void 0,{focus:!0,bottom:!0}]])]),t("div",Dt,[t("div",Ht,a(s.worker_name),1),t("div",Et,[t("span",St,a(s.error_type_name),1),C(" "+a(s.created_at),1)])])],2))),128))])]),_:1},8,["value"])):k("",!0)],4)])}}});export{ue as default};
