import{m as d,n as m,p as i}from"./DW0zoLkc.js";import{u as h}from"./JT-TP0ui.js";const C=d(()=>{const s=m({key:["customer","channels"],query:()=>h().customer.customerChannelGet().then(e=>e.data.channel_code_data),staleTime:6e5}),c=i(()=>{var n,a;const e=[];return(a=(n=s==null?void 0:s.data)==null?void 0:n.value)==null||a.forEach(t=>{let o=e.find(_=>_.channel_id===t.channel_id);o||(o={channel_id:t.channel_id,channel_name:t.channel_name,use_yn:t.use_yn,nick_name:t.nick_name,icon_url:t.icon_url,accounts:[]},e.push(o)),o.accounts.includes(t.account_id)||o.accounts.push(t.account_id)}),e}),u=i(()=>{var e;return(e=c.value)==null?void 0:e.filter(n=>n.use_yn==="Y")}),l=i(()=>{var e;return(e=u==null?void 0:u.value)==null?void 0:e.map(n=>({label:n.channel_name,key:n.channel_id,icon:n.icon_url||""}))}),r=i(()=>{var e;return(e=u==null?void 0:u.value)==null?void 0:e.map(n=>({label:n.channel_name,key:n.channel_id,icon:n.icon_url||"",children:n.accounts.map(a=>({label:a,key:`${n.channel_id}::${a}`}))}))});return{...s,channels:c,channelOptions:l,channelOptionsWithAccount:r,getChannelIcon:e=>{var n;return((n=c.value.find(a=>a.channel_id===e))==null?void 0:n.icon_url)??""},getChannelById:e=>c.value.find(n=>n.channel_id===e),getChannelsByName:e=>c.value.filter(n=>{var a;return(a=n.channel_name)==null?void 0:a.includes(e)})}});export{C as u};
