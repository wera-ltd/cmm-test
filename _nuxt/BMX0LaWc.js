import{_ as S}from"./BMAYrI-k.js";import{u as q,a as M,_ as O}from"./CenYANIN.js";import{_ as G}from"./bSU3BkS7.js";import{_ as W}from"./DClpyqXZ.js";import{T as J}from"./BHjnLrWr.js";import K from"./BR3ifZ4a.js";import R from"./Bh2PtGga.js";import X from"./BT4B0C_d.js";import Y from"./CWz5QX5c.js";import Z from"./BcFuTNCj.js";import{m as ee,n as te,g as oe,r as re,p as V,v as se,c as m,o as i,b as p,a as e,w as f,s as ne,k as t,F as $,L as A,z as w,A as g,M as B,y as le,t as u,d as b,C as ae}from"./LPxRqn7h.js";import{u as ie}from"./CVECu6ls.js";import"./CRRDz0z4.js";import"./FSGCQaRc.js";import"./CVjt7oRL.js";import"./CVc0ME9d.js";import"./hEEt9y14.js";import"./BuEGsoNK.js";import"./DBdWoiNH.js";import"./DI4q9_RX.js";import"./3ep400Ys.js";import"./Cce1uyXJ.js";import"./DyW3Toxe.js";import"./Zt60UCim.js";import"./DNhS3gqx.js";import"./99VMIX_w.js";import"./uAWAIpa9.js";import"./DcMVam8O.js";import"./Bdfwd-9f.js";import"./DVmhUD9Q.js";import"./Ba2ANJEj.js";import"./B1iElDZo.js";import"./uZGIKG_U.js";const ce=ee(()=>({...te({key:()=>["workHistory","errorList"],query:()=>ie().workHistory.historyErrorListGet().then(v=>v.data)})})),de={class:"portrait:h-dvh"},ue={class:"flex items-center gap-1"},me={ref:"$elExceptDiv",class:"px-4 js-exception-content"},pe={class:"flex items-center mb-1 bg-white rounded-2xl"},_e=["onClick"],fe={class:"text-sm font-normal"},he={key:1,class:"text-sm font-normal"},xe={class:"js-list"},ye={class:"flex w-full items-center mb-1"},we={class:"w-14 text-center flex-none"},ve=["src"],ge={class:"gap-1 w-[calc(100%-6rem)] ml-2"},be={class:"flex items-center justify-between mb-1"},ke={class:"font-medium leading-4"},Ce={class:"flex items-center"},Le={class:"text-gray-400 text-xxs overflow-ellipsis whitespace-nowrap overflow-hidden"},Ve={type:"button",class:"text-xs w-8 h-8 right-0 top-0 text-[#3f7ddc]"},$e={class:"flex items-center"},Ae={class:"w-14 text-center flex-none text-xs text-gray-400"},Be={class:"w-[calc(100%-4rem)] text-xs ml-2 flex items-center justify-between pr-3"},De={class:"text-red-400"},dt=oe({__name:"error-list",setup(D){const{contentHeight:v,updateAllHeights:I}=q(".js-exception-content"),{data:x,error:k,isLoading:C,refetch:P}=ce(),{getChannelIcon:E,channelOptionsWithAccount:H}=M(),r=re({keyword:"",channel_list:[],errorCategory:"All"}),L=V(()=>{var n;const c=[{name:"All",code:"All"},{name:"옵션변경",code:"error-001"},{name:"판매중지",code:"error-002"},{name:"상품조회",code:"error-003"},{name:"채널정책",code:"error-999"}],o=((n=x.value)==null?void 0:n.error_group_code_data)||[];return c.map(s=>{var _;if(s.code==="All")return{...s,count:((_=x.value)==null?void 0:_.error_tot_count)||0};const d=o.find(h=>h.code===s.code);return{...s,count:(d==null?void 0:d.count)||0}})}),N=V(()=>{var o;let c=((o=x.value)==null?void 0:o.error_data_list)||[];if(r.value.errorCategory!=="All"&&(c=c.filter(n=>n.error_type_code===r.value.errorCategory)),r.value.keyword&&r.value.keyword.trim()){const n=r.value.keyword.trim().toLowerCase();c=c.filter(s=>{const d=(s.channel_product_name||"").toLowerCase(),_=(s.channel_product_id||"").toLowerCase(),h=(s.error_type_name||"").toLowerCase();return d.includes(n)||_.includes(n)||h.includes(n)})}if(r.value.channel_list&&r.value.channel_list.length>0){const n=r.value.channel_list.map(s=>{const[d]=s.key.split("::");return d});c=c.filter(s=>n.includes(s.channel_id))}return c});return se(()=>{I()}),(c,o)=>{const n=ne,s=S,d=O,_=Z,h=Y,T=X,j=R,U=G,z=W,F=K,Q=J;return i(),m("article",de,[p(s,null,{right:f(()=>[e("div",ue,[p(n,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-white! border-white!",rounded:"",outlined:""},{default:f(()=>o[2]||(o[2]=[e("span",{class:"text-sm"},"오류 재전송",-1)])),_:1,__:[2]}),p(n,{type:"button",class:"flex items-center gap-2 text-blue-600! bg-blue-100! border-blue-100!",rounded:""},{default:f(()=>o[3]||(o[3]=[e("span",{class:"text-sm"},"상품 동기화",-1)])),_:1,__:[3]})])]),_:1}),e("div",me,[p(d,{modelValue:t(r).channel_list,"onUpdate:modelValue":o[0]||(o[0]=l=>t(r).channel_list=l),options:t(H),placeholder:"판매채널 선택",class:"mb-1!","button-class":"rounded-full!"},null,8,["modelValue","options"]),p(T,{class:"mb-4 w-full"},{default:f(()=>[p(_,{modelValue:t(r).keyword,"onUpdate:modelValue":o[1]||(o[1]=l=>t(r).keyword=l),type:"text",class:"text-sm! w-full rounded-full! peer",placeholder:"상품명, 품목코드, 오류구분을 입력하세요"},null,8,["modelValue"]),p(h,{class:"pi pi-search peer-focus:text-primary!"})]),_:1}),e("div",pe,[(i(!0),m($,null,A(t(L),(l,a)=>(i(),m("button",{key:a,class:B(["py-2 w-full text-center text-gray-600",{"rounded-l-2xl w-56!":a===0,"rounded-r-2xl":a===t(L).length-1,"bg-gray-950 text-white":t(r).errorCategory===l.code}]),onClick:y=>t(r).errorCategory=l.code},[l.count?(i(),w(j,{key:0,value:l.count,size:"small",pt:{pcBadge:{root:"font-normal! bg-red-400! outline-1! rounded-full! -top-[5px]! right-[5px]!"}}},{default:f(()=>[e("strong",fe,u(l.name),1)]),_:2},1032,["value"])):(i(),m("strong",he,u(l.name),1))],10,_e))),128))])],512),e("div",{class:"px-4 pt-2 overflow-auto scrollbar-none transition-all duration-300",style:ae({height:t(v)})},[t(C)?(i(),w(U,{key:0,class:"h-full"})):g("",!0),t(k)?(i(),w(z,{key:1,retry:t(P)},null,8,["retry"])):g("",!0),!t(C)&&!t(k)&&t(x)?(i(),w(F,{key:2,value:t(N),class:"w-full h-full",pt:{content:"bg-inherit! h-full"}},{list:f(l=>[e("div",xe,[(i(!0),m($,null,A(l.items,(a,y)=>(i(),m("div",{key:y,class:B(["w-full py-2 text-sm border-gray-300 dark:border-gray-700",{"border-t":y!==0,"border-b":y===l.items.length-1}])},[e("div",ye,[e("div",we,[e("img",{src:t(E)(a.channel_id),alt:"",class:"w-10 h-10 mx-auto"},null,8,ve)]),e("div",ge,[e("div",be,[e("p",ke,u(a.channel_product_name),1)]),e("div",Ce,[e("div",Le,[b(u(a.channel_name)+" ",1),o[4]||(o[4]=e("span",{class:"bg-gray-300 mx-1 w-px h-2 inline-block"},null,-1)),b(" "+u(a.channel_product_id),1)])])]),le((i(),m("button",Ve,o[5]||(o[5]=[e("i",{class:"pi pi-chevron-down text-gray-400! text-sm!"},null,-1)]))),[[Q,{value:a.msg,pt:{text:"text-sm!"}},void 0,{focus:!0,bottom:!0}]])]),e("div",$e,[e("div",Ae,u(a.worker_name),1),e("div",Be,[e("span",De,u(a.error_type_name),1),b(" "+u(a.created_at),1)])])],2))),128))])]),_:1},8,["value"])):g("",!0)],4)])}}});export{dt as default};
