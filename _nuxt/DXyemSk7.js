import _ from"./C5mLLl2H.js";import{g as w,c as r,o,A as m,F as h,B as v,a as k,b as p,D as b,N as C,z as B,w as T,G as g,S as x,k as $,T as N,m as O,n as z,p as y,v as V,K as A}from"./C8wjEdNG.js";import{u as G}from"./BlnwMG1n.js";const I={key:0},Q={class:"flex"},j={class:"self-center flex-1"},D=w({__name:"Skeleton",props:{type:{type:String,default:"list"},count:{type:Number,default:10},style:{type:String},class:{type:String}},setup(e){const l=e;return(c,u)=>{const a=_;return o(),r(h,null,[e.type==="list"?(o(),r("ul",I,[(o(!0),r(h,null,v(e.count,f=>(o(),r("li",{key:f,class:"mb-4"},[k("div",Q,[p(a,{shape:"circle",size:"4rem",class:"mr-2"}),k("div",j,[p(a,{width:"100%",class:"mb-2"}),p(a,{width:"75%"})])])]))),128))])):m("",!0),e.type==="chart"?(o(),r("div",{key:1,class:C(["w-full flex gap-2",l.class]),style:b(l.style)},[(o(!0),r(h,null,v(e.count,f=>(o(),B(a,{key:f,width:`${e.count/100*100}%`,height:"100%"},null,8,["width"]))),128))],6)):m("",!0)],64)}}}),K=w({__name:"Modal",props:{hideHeader:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!0},confirmButton:{type:Boolean,default:!0},hideOverlay:{type:Boolean,default:!1},clickToClose:{type:Boolean,default:!1},contentTransition:{type:String,default:"vfm-fade"},overlayTransition:{type:String,default:"vfm-fade"},overlayClass:{type:String,default:""},contentClass:{type:String,default:"bg-white w-full h-full"},lockScroll:{type:Boolean,default:!0},headerClass:{type:String,default:""},focusTrap:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","closed","opened","clickOutside"],setup(e,{emit:l}){const c=l;return(u,a)=>(o(),B($(N),x(u.$attrs,{class:"flex justify-center items-center","overlay-class":e.overlayClass,"content-class":["relative modal-contents",e.contentClass],"click-to-close":e.clickToClose,"overlay-transition":e.overlayTransition,"content-transition":e.contentTransition,"hide-overlay":e.hideOverlay,"lock-scroll":e.lockScroll,"focus-trap":e.focusTrap}),{default:T(()=>[e.hideHeader?m("",!0):(o(),r("div",{key:0,class:C(`flex items-center justify-between px-4 py-5 ${e.headerClass}`)},[g(u.$slots,"title"),e.closeConfirm?(o(),r("button",{key:0,class:"modal-close-button",onClick:a[0]||(a[0]=()=>c("closed"))},a[1]||(a[1]=[k("i",{class:"pi pi-times"},null,-1)]))):m("",!0)],2)),g(u.$slots,"default")]),_:3},16,["overlay-class","content-class","click-to-close","overlay-transition","content-transition","hide-overlay","lock-scroll","focus-trap"]))}}),L=O(()=>{const e=z({key:["customer","channels"],query:()=>G().customer.customerChannelGet().then(n=>n.data.channel_code_data),staleTime:6e5}),l=y(()=>{var t,s;const n=[];return(s=(t=e==null?void 0:e.data)==null?void 0:t.value)==null||s.forEach(i=>{let d=n.find(S=>S.channel_id===i.channel_id);d||(d={channel_id:i.channel_id,channel_name:i.channel_name,use_yn:i.use_yn,nick_name:i.nick_name,icon_url:i.icon_url,accounts:[]},n.push(d)),d.accounts.includes(i.account_id)||d.accounts.push(i.account_id)}),n}),c=y(()=>{var n;return(n=l.value)==null?void 0:n.filter(t=>t.use_yn==="Y")}),u=y(()=>{var n;return(n=c==null?void 0:c.value)==null?void 0:n.map(t=>({label:t.channel_name,key:t.channel_id,icon:t.icon_url||""}))}),a=y(()=>{var n;return(n=c==null?void 0:c.value)==null?void 0:n.map(t=>({label:t.channel_name,key:t.channel_id,icon:t.icon_url||"",children:t.accounts.map(s=>({label:s,key:`${t.channel_id}::${s}`}))}))});return{...e,channels:l,channelOptions:u,channelOptionsWithAccount:a,getChannelIcon:n=>{var t;return((t=l.value.find(s=>s.channel_id===n))==null?void 0:t.icon_url)??""},getChannelById:n=>l.value.find(t=>t.channel_id===n),getChannelsByName:n=>l.value.filter(t=>{var s;return(s=t.channel_name)==null?void 0:s.includes(n)})}}),R=e=>{V(()=>{window.history.pushState(null,"",location.href),window.onpopstate=()=>{e&&e()}}),A(()=>{window.history.replaceState(window.history.state,"",location.href),window.onpopstate=()=>{}})};export{D as _,R as a,K as b,L as u};
