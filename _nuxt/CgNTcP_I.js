import x from"./XkEtxsH4.js";import{g,c as u,o as c,A as v,F as b,L as w,a as p,b as f,C as D,M as S,z as $,D as _,t as B,v as T,R as C,I,w as N,S as O,k as j,T as z,m as M,n as P,p as h}from"./Bt72K47O.js";import U from"./DhUTf0Ut.js";import A from"./oyRiAeRG.js";import{u as E,_ as Q}from"./B6UMsHU0.js";import{u as R}from"./CwDUf_UV.js";const F={key:0},G={class:"flex"},H={class:"self-center flex-1"},ae=g({__name:"Skeleton",props:{type:{type:String,default:"list"},count:{type:Number,default:10},style:{type:String},class:{type:String}},setup(l){const n=l;return(s,o)=>{const e=x;return c(),u(b,null,[l.type==="list"?(c(),u("ul",F,[(c(!0),u(b,null,w(l.count,d=>(c(),u("li",{key:d,class:"mb-4"},[p("div",G,[f(e,{shape:"circle",size:"4rem",class:"mr-2"}),p("div",H,[f(e,{width:"100%",class:"mb-2"}),f(e,{width:"75%"})])])]))),128))])):v("",!0),l.type==="chart"?(c(),u("div",{key:1,class:S(["w-full flex gap-2",n.class]),style:D(n.style)},[(c(!0),u(b,null,w(l.count,d=>(c(),$(e,{key:d,width:`${l.count/100*100}%`,height:"100%"},null,8,["width"]))),128))],6)):v("",!0)],64)}}}),L={class:"mb-4"},K={class:"flex items-center justify-between"},W={class:"block font-medium text-md"},Y={class:"flex items-center mb-2 mt-1"},ne=g({__name:"DateRange",props:{title:{},modelValue:{},placeholder:{}},emits:["update:modelValue"],setup(l,{emit:n}){const s=n,o=E(),e=o().toDate(),d=[{label:"오늘",value:[e,e]},{label:"일주일",value:[o().subtract(1,"week").toDate(),e]},{label:"3개월",value:[o().subtract(3,"month").toDate(),e]},{label:"6개월",value:[o().subtract(6,"month").toDate(),e]},{label:"1년",value:[o().subtract(1,"year").toDate(),e]},{label:"3년",value:[o().subtract(3,"year").toDate(),e]}],k=m=>{d.forEach((t,a)=>{t.label===m&&s("update:modelValue",t.value)})};return(m,t)=>{const a=A,i=U;return c(),u("div",L,[p("div",K,[p("strong",W,B(m.title),1),_(m.$slots,"header-right")]),p("div",Y,[f(a,{options:d,"option-label":"label","option-value":"label",size:"small",class:"w-full",pt:{pctogglebutton:{root:"w-full",content:"px-0!"}},onValueChange:k})]),f(i,{"model-value":m.modelValue,"show-icon":"",fluid:"","icon-display":"input","selection-mode":"range","manual-input":!1,"date-format":"yy.mm.dd",class:"w-full","input-class":"text-sm!",pt:{dayView:"text-sm!"},"onUpdate:modelValue":t[0]||(t[0]=r=>m.$emit("update:modelValue",r))},null,8,["model-value"])])}}}),q={class:"mb-4"},J={class:"block font-medium mb-2 text-md"},se=g({__name:"TreeSelect",props:{title:{},options:{},modelValue:{},placeholder:{}},setup(l){return(n,s)=>{const o=Q;return c(),u("div",q,[p("strong",J,B(n.title),1),f(o,{"model-value":n.modelValue,options:n.options,placeholder:n.placeholder,"onUpdate:modelValue":s[0]||(s[0]=e=>n.$emit("update:modelValue",e))},null,8,["model-value","options","placeholder"])])}}}),ie=g({__name:"Modal",props:{hideHeader:{type:Boolean,default:!1},closeConfirm:{type:Boolean,default:!0},confirmButton:{type:Boolean,default:!0},hideOverlay:{type:Boolean,default:!1},clickToClose:{type:Boolean,default:!1},contentTransition:{type:String,default:"vfm-fade"},overlayTransition:{type:String,default:"vfm-fade"},overlayClass:{type:String,default:""},contentClass:{type:String,default:"bg-white w-full h-full"},lockScroll:{type:Boolean,default:!0},headerClass:{type:String,default:""},focusTrap:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","closed","opened","clickOutside"],setup(l,{emit:n}){const s=n;return T(()=>{const{modals:o,close:e}=C();console.log("마운트 modals",o),window.history.pushState(null,"",location.href),window.onpopstate=()=>{e(o[o.length-1].ctx.modalId)}}),I(()=>{const{modals:o,close:e}=C();console.log("언마운트 modals",o),o.length===0?(console.log("마지막모달임"),window.history.replaceState(window.history.state,"",location.href),window.onpopstate=null):(console.log("마지막모달 아님"),window.onpopstate=()=>{e(o[o.length-1].ctx.modalId)})}),(o,e)=>(c(),$(j(z),O({"modal-id":Math.random().toString(36).substring(2,10)},o.$attrs,{class:"flex justify-center items-center","overlay-class":l.overlayClass,"content-class":["relative modal-contents max-w-[1280px]",l.contentClass],"click-to-close":l.clickToClose,"overlay-transition":l.overlayTransition,"content-transition":l.contentTransition,"hide-overlay":l.hideOverlay,"lock-scroll":l.lockScroll,"focus-trap":l.focusTrap,onClosed:e[1]||(e[1]=d=>s("closed"))}),{default:N(()=>[l.hideHeader?v("",!0):(c(),u("div",{key:0,class:S(`flex items-center justify-between px-4 py-5 ${l.headerClass}`)},[_(o.$slots,"title"),l.closeConfirm?(c(),u("button",{key:0,class:"modal-close-button",onClick:e[0]||(e[0]=()=>s("closed"))},e[2]||(e[2]=[p("i",{class:"pi pi-times"},null,-1)]))):v("",!0)],2)),_(o.$slots,"default")]),_:3},16,["modal-id","overlay-class","content-class","click-to-close","overlay-transition","content-transition","hide-overlay","lock-scroll","focus-trap"]))}}),ce=M(()=>{const l=P({key:["customer","channels"],query:()=>R().customer.customerChannelGet().then(t=>t.data.channel_code_data),staleTime:6e5}),n=h(()=>{var a,i;const t=[];return(i=(a=l==null?void 0:l.data)==null?void 0:a.value)==null||i.forEach(r=>{let y=t.find(V=>V.channel_id===r.channel_id);y||(y={channel_id:r.channel_id,channel_name:r.channel_name,use_yn:r.use_yn,nick_name:r.nick_name,icon_url:r.icon_url,accounts:[]},t.push(y)),y.accounts.includes(r.account_id)||y.accounts.push(r.account_id)}),t}),s=h(()=>{var t;return(t=n.value)==null?void 0:t.filter(a=>a.use_yn==="Y")}),o=h(()=>{var t;return(t=s==null?void 0:s.value)==null?void 0:t.map(a=>({label:a.channel_name,key:a.channel_id,icon:a.icon_url||""}))}),e=h(()=>{var t;return(t=s==null?void 0:s.value)==null?void 0:t.map(a=>({label:a.channel_name,key:a.channel_id,icon:a.icon_url||"",children:a.accounts.map(i=>({label:i,key:`${a.channel_id}::${i}`}))}))});return{...l,channels:n,channelOptions:o,channelOptionsWithAccount:e,getChannelIcon:t=>{var a;return((a=n.value.find(i=>i.channel_id===t))==null?void 0:a.icon_url)??""},getChannelById:t=>n.value.find(a=>a.channel_id===t),getChannelsByName:t=>n.value.filter(a=>{var i;return(i=a.channel_name)==null?void 0:i.includes(t)})}});export{ae as _,ne as a,se as b,ie as c,ce as u};
