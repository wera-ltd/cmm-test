import{_ as I}from"./Dr1Oqigt.js";import F from"./D0l_VwWO.js";import W from"./DYdKppjr.js";import{g as D,z as j,o as c,w as m,a as e,b as i,s as L,d as f,j as J,p as K,l as X,k as l,t as g,c as p,F as S,L as P,R as Y,P as Z,S as ee,r as te,A as H,C as se,M as R,N as E}from"./DLbfEYiI.js";import le from"./Tc3sQ4ga.js";import oe from"./BbAvI3nR.js";import{_ as O}from"./BE58SdKt.js";import ne from"./CDPLdnkt.js";import{a as ae,u as ie}from"./FmYG9mxt.js";import{u as q}from"./CcWrHiJE.js";import{u as re}from"./KOkJuttU.js";import{u as de}from"./DSHRTDva.js";import"./DUkO4WBT.js";import"./DssnCWF3.js";import"./DqvNGcCP.js";import"./C8d1QJ2w.js";import"./Dfpgo4AO.js";import"./DRbx_IST.js";import"./D_-P41S1.js";import"./2itVkcUY.js";import"./OWnKlUgF.js";import"./CwcLSCiE.js";const ue={class:"border-t border-[var(--space-border)] px-4 py-4 flex-1 overflow-y-auto scrollbar-none"},ce={class:"flex items-center border-b border-gray-200 pb-4 pt-4"},me={class:"mt-4"},pe={class:"h-14 shrink-0 w-full flex items-center border-t-gray-100 border-t justify-center px-3 py-2 gap-2"},_e=D({__name:"TimeBulkSetting",emits:["closed"],setup(T,{emit:k}){const h=k;return(n,d)=>{const a=F,y=L,b=O;return c(),j(b,{"content-class":"bg-white w-80 h-[50dvh] flex flex-col","header-class":"shrink-0 border-b border-zinc-200",onClosed:d[1]||(d[1]=_=>h("closed"))},{title:m(()=>d[2]||(d[2]=[e("h1",{class:"font-semibold"}," 시간일괄설정 ",-1)])),default:m(()=>[e("div",ue,[e("div",ce,[i(a,{"time-only":"",placeholder:"시/분",class:"w-full"}),i(y,{icon:"pi pi-times",severity:"secondary",rounded:"",size:"small",variant:"text","aria-label":"Cancel",class:"ml-1"})]),e("div",me,[i(y,{rounded:"",size:"small",outlined:"",severity:"secondary"},{default:m(()=>d[3]||(d[3]=[e("i",{class:"pi pi-plus text-sm!"},null,-1),f(" 시간추가 ")])),_:1,__:[3]})])]),e("div",pe,[i(y,{size:"small",class:"w-full h-full text-sm!",severity:"secondary",onClick:d[0]||(d[0]=_=>h("closed"))},{default:m(()=>d[4]||(d[4]=[f(" 닫기 ")])),_:1,__:[4]}),i(y,{size:"small",class:"w-full h-full text-sm!"},{default:m(()=>d[5]||(d[5]=[f(" 설정 ")])),_:1,__:[5]})])]),_:1})}}}),fe={class:"border-t border-[var(--space-border)] px-4 py-4 flex-1 overflow-y-auto scrollbar-none"},ye={class:"flex items-center gap-2 text-sm mb-3"},ve={for:"all"},ge={class:"text-primary font-normal"},he={class:"gap-2 flex flex-col"},be=["onClick"],xe={class:"flex items-center gap-2"},ke=["src"],we={class:"font-medium block"},$e={class:"text-xs text-gray-500"},Ce={class:"h-14 shrink-0 w-full flex items-center border-t-gray-100 border-t justify-center px-3 py-2 gap-2"},Ve=D({__name:"ChannelListSetting",emits:["closed"],setup(T,{emit:k}){const h=k,{toast:n}=J(),{getChannelIcon:d}=ae(),{scheduleData:a}=q(),y=K({get:()=>!a.value.channel_list||a.value.channel_list.length===0?!1:a.value.channel_list.every(_=>_.is_channel),set:_=>{a.value.channel_list.forEach(o=>{o.is_channel=_})}}),b=()=>{if(!a.value.channel_list.filter(o=>o.is_channel).length){n.error("쇼핑몰 설정은 필수입니다.최소 1개이상 추가 설정 바랍니다.");return}const{mutate:_}=Z({mutation:()=>re().customer.customerSettingUpdatePatch({CustomerSettingUpdatePatchRequest:{stock_setup_data:{},schedule_data:{...a.value}}}),onSuccess:()=>{h("closed"),ee().invalidateQueries({key:["customer","setting"]})}});_()};return(_,o)=>{const w=ne,V=L,B=O;return c(),j(B,{"content-class":"bg-white w-full h-dvh flex flex-col","header-class":"shrink-0 border-b border-zinc-200",onClosed:o[3]||(o[3]=s=>h("closed"))},{title:m(()=>o[4]||(o[4]=[e("h1",{class:"font-semibold"}," 판매채널 설정 ",-1)])),default:m(()=>[e("div",fe,[e("div",ye,[i(w,{modelValue:l(y),"onUpdate:modelValue":o[0]||(o[0]=s=>X(y)?y.value=s:null),size:"small","input-id":"all",name:"all",binary:!0},null,8,["modelValue"]),e("label",ve,[o[5]||(o[5]=f("총 ")),e("b",ge,g(l(a).channel_list.length),1),o[6]||(o[6]=f("개 전체선택 "))])]),e("ul",he,[(c(!0),p(S,null,P(l(a).channel_list,(s,t)=>(c(),p("li",{key:s.account_id,class:"border rounded-md border-gray-200 p-4 flex justify-between items-center cursor-pointer",onClick:u=>s.is_channel=!s.is_channel},[e("div",xe,[e("span",null,g(t+1)+".",1),e("img",{src:l(d)(s.channel_id),alt:"",class:"w-10 h-10"},null,8,ke),e("div",null,[e("strong",we,g(s.channel_name),1),e("p",$e,g(s.account_id),1)])]),i(w,{modelValue:s.is_channel,"onUpdate:modelValue":u=>s.is_channel=u,size:"small","input-id":`channel-${s.account_id}`,binary:!0,onClick:o[1]||(o[1]=Y(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","input-id"])],8,be))),128))])]),e("div",Ce,[i(V,{size:"small",class:"w-full h-full text-sm!",severity:"secondary",onClick:o[2]||(o[2]=s=>h("closed"))},{default:m(()=>o[7]||(o[7]=[f(" 닫기 ")])),_:1,__:[7]}),i(V,{size:"small",class:"w-full h-full text-sm!",onClick:b},{default:m(()=>o[8]||(o[8]=[f(" 설정 ")])),_:1,__:[8]})])]),_:1})}}}),ze={class:"bg-white p-4 border-b-8 border-gray-200"},Se={class:"gap-0.5 flex flex-col text-sm mb-4 text-gray-500"},Be={class:"text-primary font-semibold"},Pe={class:"flex flex-col gap-2"},De={class:"flex items-center justify-between"},je={class:"flex items-center justify-between"},Le={class:"bg-white"},Te={class:"flex flex-col gap-2 relative"},Ue={key:0,class:"absolute w-full h-full bg-white/50 z-10 flex items-center justify-center text-sm font-medium"},Me={class:"flex items-center justify-between mb-4"},Ne={class:"flex flex-wrap gap-1"},Ae=["onClick"],Qe={class:"font-medium uppercase text-gray-700"},He={key:1,class:"font-medium uppercase text-gray-700"},Re={class:"my-4"},Ee={class:"text-sm text-gray-400"},Fe={class:"block py-4"},Oe={class:"flex items-center justify-between mb-2"},qe={class:"flex items-center gap-2"},Ge={class:"font-medium uppercase"},Ie={key:0,class:"flex flex-wrap gap-y-2"},We={key:1},vt=D({__name:"schedule",setup(T){const k=de(),{contentHeight:h}=ie(),{scheduleData:n,isLoading:d}=q(),a=te(0),y=s=>{if(!s||s.length!==4)return new Date;const t=parseInt(s.substring(0,2)),u=parseInt(s.substring(2,4)),v=new Date;return v.setHours(t,u,0,0),v},b=s=>y(s),_=(s,t,u)=>{var v,z;console.log(s,t,u),(z=(v=n.value)==null?void 0:v.days_list[s])!=null&&z.time&&(n.value.days_list[s].time[t]=u.replace(":",""))},o=()=>{var t,u;const s=(t=n.value)==null?void 0:t.days_list[a.value];s&&s.time.length<(((u=n.value)==null?void 0:u.round)||0)&&s.time.push("0900")},w=s=>{var u;const t=(u=n.value)==null?void 0:u.days_list[a.value];t&&t.time.length>0&&t.time.splice(s,1)},V=()=>{const{open:s}=E({component:_e});s()},B=()=>{const{open:s}=E({component:Ve});s()};return(s,t)=>{var M,N,A,Q;const u=I,v=oe,z=le,$=L,G=W,U=F;return c(),p(S,null,[i(u,{class:""}),!l(d)&&l(n)?(c(),p("div",{key:0,class:"overflow-auto scrollbar-none",style:se(`height: ${l(h)}`)},[e("div",ze,[e("div",Se,[e("p",null,[t[4]||(t[4]=f(" • 요일별 최대 추가 가능 슬롯은 ")),e("strong",Be,g((M=l(n))==null?void 0:M.round)+"개",1),t[5]||(t[5]=f("까지 가능합니다. "))]),t[6]||(t[6]=e("p",null," • 스케줄 설정시 쇼핑몰 설정도 같이 선택하여주시기 바랍니다. ",-1))]),e("div",Pe,[e("div",De,[t[7]||(t[7]=e("b",{class:"font-medium"},"스케줄 사용여부",-1)),i(v,{modelValue:l(n).is_schedule,"onUpdate:modelValue":t[0]||(t[0]=r=>l(n).is_schedule=r)},null,8,["modelValue"])]),e("div",je,[t[9]||(t[9]=e("b",{class:"font-medium"},"쇼핑몰 설정",-1)),e("button",{class:"inline-flex items-center gap-4 text-gray-400 cursor-pointer",onClick:B},[i(z,{severity:"contrast",value:`${(A=(N=l(n))==null?void 0:N.channel_list)==null?void 0:A.length}개 채널`,class:"font-normal! text-sm! rounded-full!"},null,8,["value"]),t[8]||(t[8]=e("i",{class:"pi pi-chevron-right"},null,-1))])])])]),e("div",Le,[e("div",Te,[l(n).is_schedule?H("",!0):(c(),p("div",Ue," 스케줄을 사용할 수 없습니다. ")),e("article",{class:R([{"opacity-10":!l(n).is_schedule},"p-4"])},[e("header",Me,[t[11]||(t[11]=e("h3",{class:"font-medium text-gray-800"}," Weekly schedule ",-1)),i($,{rounded:"",size:"small",outlined:"",onClick:V},{default:m(()=>t[10]||(t[10]=[f(" 시간일괄설정 ")])),_:1,__:[10]})]),e("div",Ne,[(c(!0),p(S,null,P((Q=l(n))==null?void 0:Q.days_list,(r,x)=>(c(),p("button",{key:x,class:R(["rounded-lg cursor-pointer border w-[calc(25%-3px)] text-center px-4 py-6 relative border-gray-200 shadow-xs",[{"bg-gray-100":!r.is_day},{"shadow-[0_0_10px]! shadow-gray-400/60!":l(n).days_list[l(a)].day===r.day}]]),onClick:C=>a.value=x},[l(k)().format("ddd").toLowerCase()==r.day?(c(),j(G,{key:0,value:"오늘",size:"small",pt:{pcBadge:{root:"font-normal! bg-red-400! outline-1! -top-[55%]!  right-[5%]!"}}},{default:m(()=>[e("strong",Qe,g(r.day),1)]),_:2},1024)):(c(),p("strong",He,g(r.day),1)),e("div",Re,[i(v,{modelValue:r.is_day,"onUpdate:modelValue":C=>r.is_day=C,class:"relative w-10! h-5!",pt:{handle:"w-3! h-3! data-[p=checked]:start-[24px]! top-[60%]! ",slider:"data-[p=checked]:bg-violet-500!"}},null,8,["modelValue","onUpdate:modelValue"])]),e("p",Ee,g(r.time.length<1?"-":r.time.length+" slots"),1)],10,Ae))),128))]),e("div",Fe,[e("div",Oe,[e("div",qe,[e("strong",Ge,g(l(n).days_list[l(a)].day),1),i(v,{modelValue:l(n).days_list[l(a)].is_day,"onUpdate:modelValue":t[1]||(t[1]=r=>l(n).days_list[l(a)].is_day=r),class:"relative w-10! h-5!",pt:{handle:"w-3! h-3! data-[p=checked]:start-[24px]! top-[60%]!",slider:"data-[p=checked]:bg-violet-500!"}},null,8,["modelValue"])]),i($,{rounded:"",size:"small",outlined:"",severity:"secondary",onClick:o},{default:m(()=>t[12]||(t[12]=[e("i",{class:"pi pi-plus text-sm!"},null,-1),f(" 시간추가 ")])),_:1,__:[12]})]),l(n).days_list[l(a)].time&&l(n).days_list[l(a)].time.length>0?(c(),p("div",Ie,[(c(!0),p(S,null,P(l(n).days_list[l(a)].time,(r,x)=>(c(),p("div",{key:r+x},[i(U,{"model-value":b(r),"step-minute":10,"time-only":"",placeholder:"시/분",class:"w-32",onBlur:C=>_(l(a),x,C.value)},null,8,["model-value","onBlur"]),i($,{icon:"pi pi-times",severity:"secondary",rounded:"",size:"small",variant:"text","aria-label":"Cancel",class:"ml-1",onClick:C=>w(x)},null,8,["onClick"])]))),128))])):(c(),p("div",We,[i(U,{"model-value":b("0900"),"time-only":"",placeholder:"시/분",class:"w-32",onBlur:t[2]||(t[2]=r=>_(l(a),0,r.value))},null,8,["model-value"]),i($,{icon:"pi pi-times",severity:"contrast",rounded:"",size:"small",variant:"text","aria-label":"Cancel",class:"ml-1",onClick:t[3]||(t[3]=r=>w(0))})]))]),i($,{type:"button",class:"flex w-full items-center gap-2 text-blue-600! bg-blue-100! border-blue-100!",rounded:""},{default:m(()=>t[13]||(t[13]=[e("span",{class:"text-sm"},"저장",-1)])),_:1,__:[13]})],2)])])],4)):H("",!0)],64)}}});export{vt as default};
